<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ä¼ä¸šæ”¿ç­–æŸ¥è¯¢</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
  background: #f5f7fa;
  color: #333;
  min-height: 100vh;
}

/* é¡¶éƒ¨æ  */
.header {
  background: linear-gradient(135deg, #1a73e8, #0d47a1);
  color: #fff;
  padding: 16px 20px;
  font-size: 18px;
  font-weight: 600;
  text-align: center;
  position: sticky;
  top: 0;
  z-index: 10;
}

.container { padding: 16px; max-width: 480px; margin: 0 auto; }

/* æ­¥éª¤æŒ‡ç¤ºå™¨ */
.steps {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 16px 0;
  align-items: center;
}
.step-dot {
  width: 28px; height: 28px;
  border-radius: 50%;
  background: #ddd;
  color: #999;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; font-weight: 600;
  transition: all 0.3s;
}
.step-dot.active { background: #1a73e8; color: #fff; }
.step-dot.done { background: #34a853; color: #fff; }
.step-line { width: 32px; height: 2px; background: #ddd; }
.step-line.done { background: #34a853; }

/* å¡ç‰‡ */
.card {
  background: #fff;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}
.card-title {
  font-size: 15px;
  font-weight: 600;
  color: #1a73e8;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* è¾“å…¥æ¡† */
.input-group { margin-bottom: 16px; }
.input-group label {
  display: block;
  font-size: 13px;
  color: #666;
  margin-bottom: 6px;
}
.input-group input {
  width: 100%;
  padding: 12px 14px;
  border: 1.5px solid #e0e0e0;
  border-radius: 8px;
  font-size: 16px;
  outline: none;
  transition: border 0.2s;
}
.input-group input:focus { border-color: #1a73e8; }

/* æŒ‰é’® */
.btn {
  width: 100%;
  padding: 13px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
}
.btn:active { opacity: 0.8; }
.btn-primary { background: #1a73e8; color: #fff; }
.btn-success { background: #34a853; color: #fff; }
.btn-outline {
  background: #fff;
  color: #1a73e8;
  border: 1.5px solid #1a73e8;
}
.btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* å…¬å¸ä¿¡æ¯ */
.info-table { width: 100%; }
.info-row {
  display: flex;
  padding: 10px 0;
  border-bottom: 1px solid #f0f0f0;
  font-size: 14px;
}
.info-row:last-child { border-bottom: none; }
.info-label {
  width: 80px;
  flex-shrink: 0;
  color: #999;
}
.info-value {
  flex: 1;
  color: #333;
  word-break: break-all;
}

/* æ”¿ç­–åˆ—è¡¨ */
.policy-item {
  padding: 14px 0;
  border-bottom: 1px solid #f0f0f0;
}
.policy-item:last-child { border-bottom: none; }
.policy-title {
  font-size: 15px;
  font-weight: 500;
  color: #333;
  margin-bottom: 6px;
  line-height: 1.4;
}
.policy-meta {
  font-size: 12px;
  color: #999;
  margin-bottom: 6px;
}
.policy-summary {
  font-size: 13px;
  color: #666;
  line-height: 1.5;
  margin-bottom: 8px;
}
.policy-links a {
  display: inline-block;
  font-size: 13px;
  color: #1a73e8;
  text-decoration: none;
  margin-right: 16px;
  padding: 4px 0;
}

/* åŠ è½½åŠ¨ç”» */
.loading {
  text-align: center;
  padding: 40px 0;
}
.spinner {
  width: 36px; height: 36px;
  border: 3px solid #e0e0e0;
  border-top-color: #1a73e8;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto 12px;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text {
  font-size: 14px;
  color: #999;
}

/* AI æ€è€ƒè¿‡ç¨‹é¢æ¿ */
.thinking-panel {
  margin-top: 12px;
}
.thinking-section {
  margin-bottom: 12px;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #e8eaed;
  transition: all 0.3s;
}
.thinking-section.active {
  border-color: #1a73e8;
  box-shadow: 0 1px 6px rgba(26,115,232,0.15);
}
.thinking-header {
  display: flex;
  align-items: center;
  padding: 10px 12px;
  background: #f8f9fa;
  font-size: 13px;
  font-weight: 600;
  color: #333;
  gap: 8px;
}
.thinking-header .icon {
  font-size: 16px;
}
.thinking-header .badge {
  margin-left: auto;
  font-size: 11px;
  font-weight: 400;
  padding: 2px 8px;
  border-radius: 10px;
  background: #e8f0fe;
  color: #1a73e8;
}
.thinking-header .badge.done {
  background: #e6f9e8;
  color: #0d7a3f;
}
.thinking-body {
  padding: 10px 12px;
  font-size: 12px;
  color: #555;
  line-height: 1.7;
  display: none;
}
.thinking-section.active .thinking-body,
.thinking-section.done .thinking-body {
  display: block;
}
.thinking-item {
  padding: 4px 0;
  display: flex;
  align-items: flex-start;
  gap: 6px;
}
.thinking-item .bullet {
  flex-shrink: 0;
  margin-top: 2px;
}
.thinking-item .text {
  flex: 1;
}
.search-task-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  font-size: 12px;
}
.search-task-item .dim-tag {
  font-size: 10px;
  padding: 1px 6px;
  border-radius: 8px;
  background: #f0e6ff;
  color: #7b1fa2;
  white-space: nowrap;
}
.search-task-item .layer-tag {
  font-size: 10px;
  padding: 1px 6px;
  border-radius: 8px;
  white-space: nowrap;
}
.search-task-item .priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.search-task-item .term {
  flex: 1;
  color: #333;
}
.search-progress {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 0;
  font-size: 12px;
}
.search-progress .status-icon {
  flex-shrink: 0;
  width: 16px;
  text-align: center;
}
.mini-spinner {
  display: inline-block;
  width: 12px;
  height: 12px;
  border: 2px solid #e0e0e0;
  border-top-color: #1a73e8;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* æœç´¢æ—¥å¿— */
.log-area {
  background: #f8f9fa;
  border-radius: 8px;
  padding: 12px;
  margin-top: 12px;
  max-height: 200px;
  overflow-y: auto;
  font-size: 12px;
  color: #666;
  line-height: 1.8;
}

/* éšè— */
.hidden { display: none !important; }

/* ç©ºçŠ¶æ€ */
.empty {
  text-align: center;
  padding: 30px 0;
  color: #999;
  font-size: 14px;
}

/* tag */
.tag {
  display: inline-block;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 4px;
  margin-right: 6px;
}
.tag-gov { background: #e8f0fe; color: #1a73e8; }
.tag-wechat { background: #e6f9e8; color: #34a853; }
.tag-other { background: #fef3e0; color: #f9a825; }

/* æ”¿ç­–é“¾æ¥åŒºåŸŸ */
.link-block {
  margin-top: 10px;
  padding: 8px 10px;
  background: #f0f4ff;
  border-radius: 6px;
  border-left: 3px solid #1a73e8;
}
.link-row {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  margin-bottom: 4px;
  font-size: 12px;
  line-height: 1.6;
  word-break: break-all;
}
.link-row:last-child { margin-bottom: 0; }
.link-row .link-label {
  flex-shrink: 0;
  font-weight: 600;
  color: #333;
  min-width: 70px;
}
.link-row a {
  color: #1a73e8;
  text-decoration: none;
  word-break: break-all;
}
.link-row a:hover { text-decoration: underline; }
.link-row .no-link {
  color: #bbb;
  font-style: italic;
}

/* æ‰¶æŒå†…å®¹ */
.support-block {
  margin-top: 8px;
  padding: 8px 10px;
  background: #eef7ff;
  border-radius: 6px;
  font-size: 13px;
  color: #1a73e8;
  line-height: 1.6;
  white-space: pre-line;
}

/* æ±‡æ€»è¡¨æ ¼ */
.summary-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
  margin-top: 8px;
}
.summary-table th {
  background: #f0f4ff;
  padding: 8px 6px;
  text-align: left;
  font-weight: 600;
  color: #333;
  border-bottom: 2px solid #1a73e8;
  font-size: 12px;
}
.summary-table td {
  padding: 8px 6px;
  border-bottom: 1px solid #f0f0f0;
  vertical-align: top;
  line-height: 1.4;
}
.summary-table tr:hover { background: #fafbff; }
.score-bar {
  display: inline-block;
  height: 8px;
  border-radius: 4px;
  background: #e0e0e0;
  width: 60px;
  position: relative;
  vertical-align: middle;
}
.score-fill {
  height: 100%;
  border-radius: 4px;
  position: absolute;
  left: 0;
  top: 0;
}
.score-high { background: #34a853; }
.score-mid  { background: #fbbc04; }
.score-low  { background: #ea4335; }
.layer-badge {
  display: inline-block;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  white-space: nowrap;
}
.layer-åŸºç¡€å±‚ { background: #e8f0fe; color: #1a73e8; }
.layer-å‘å±•å±‚ { background: #e6f9e8; color: #0d7a3f; }
.layer-äººæ‰å±‚ { background: #fef3e0; color: #e37400; }
.layer-è£èª‰å±‚ { background: #fce8e8; color: #c62828; }
.validity-tag {
  font-size: 11px;
  color: #666;
  white-space: nowrap;
}
</style>
</head>
<body>

<div class="header">ğŸ¢ ä¼ä¸šæ”¿ç­–æŸ¥è¯¢ <span style="font-size:12px; opacity:0.7;">v0.18</span></div>

<!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
<div class="container">
  <div class="steps">
    <div class="step-dot active" id="dot1">1</div>
    <div class="step-line" id="line1"></div>
    <div class="step-dot" id="dot2">2</div>
    <div class="step-line" id="line2"></div>
    <div class="step-dot" id="dot3">3</div>
    <div class="step-line" id="line3"></div>
    <div class="step-dot" id="dot4">4</div>
    <div class="step-line" id="line4"></div>
    <div class="step-dot" id="dot5">5</div>
  </div>
</div>

<!-- ========== ç¬¬ä¸€æ­¥ï¼šè¾“å…¥å…¬å¸å ========== -->
<div class="container" id="step1">
  <div class="card">
    <div class="card-title">ğŸ“ é€‰æ‹©å…¬å¸</div>
    <div style="background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;padding:10px 14px;margin-bottom:14px;font-size:13px;color:#92400e">
      âš ï¸ ä¼æŸ¥æŸ¥ API å°šæœªå¯¹æ¥ï¼Œç›®å‰æä¾›ä¸‰å®¶çœŸå®ä¼ä¸šçš„æ¨¡æ‹Ÿæ•°æ®ä¾›ä½“éªŒã€‚
    </div>
    <input type="hidden" id="companyInput" value="">
    <div style="display:flex;flex-direction:column;gap:10px;margin-bottom:16px;">
      <button class="btn btn-outline" style="text-align:left;padding:12px 16px;font-size:14px;line-height:1.4;" onclick="selectCompany(this, 'ä¸Šæµ·è¿å‡¡é¢†å…‰é€šä¿¡æœ‰é™å…¬å¸')">
        ğŸ­ <b>ä¸Šæµ·è¿å‡¡é¢†å…‰é€šä¿¡æœ‰é™å…¬å¸</b><br>
        <span style="font-size:12px;color:#999;">å…‰é€šä¿¡è®¾å¤‡åˆ¶é€  Â· æµ¦ä¸œæ–°åŒº Â· å°å¾®ä¼ä¸š</span>
      </button>
      <button class="btn btn-outline" style="text-align:left;padding:12px 16px;font-size:14px;line-height:1.4;" onclick="selectCompany(this, 'è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸')">
        ğŸ”¬ <b>è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸</b><br>
        <span style="font-size:12px;color:#999;">VCSELèŠ¯ç‰‡ Â· è‹å·é«˜æ–°åŒº Â· å¤–èµ„ä¸­å°ä¼ä¸š</span>
      </button>
      <button class="btn btn-outline" style="text-align:left;padding:12px 16px;font-size:14px;line-height:1.4;" onclick="selectCompany(this, 'ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸')">
        ğŸ§  <b>ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸</b><br>
        <span style="font-size:12px;color:#999;">AIèŠ¯ç‰‡ Â· æµ¦ä¸œæ–°åŒº Â· ä¸­å‹ç§‘æŠ€ä¼ä¸š</span>
      </button>
    </div>
    <button class="btn btn-primary" onclick="queryCompany()" id="queryBtn" disabled style="opacity:0.5;">æŸ¥è¯¢ä¼ä¸šä¿¡æ¯</button>
  </div>

  <!-- æ›´æ–°æ—¥å¿— -->
  <div class="card" style="border-left:3px solid #1a73e8;">
    <div class="card-title" style="cursor:pointer;" onclick="document.getElementById('changelogBody').classList.toggle('hidden')">
      ğŸ“ æ›´æ–°æ—¥å¿—
      <span style="font-size:12px; color:#999; font-weight:400; margin-left:auto;">â–¼</span>
    </div>
    <div id="changelogBody">
      <div style="font-size:14px; font-weight:600; color:#1a73e8; margin-bottom:8px;">v0.18 â€” 2026-02-14 7ç»´åº¦æœç´¢ + ä¼ä¸šä¿¡æ¯è¡¥å…¨</div>
      <div style="font-size:12px; color:#666; line-height:1.8;">
        <b>ä¸‰å¤§æ”¹è¿›ï¼š</b><br>
        <b>1. æœç´¢ç»´åº¦ 5â†’7ï¼š</b>æ–°å¢ã€ŒğŸ“Šç¨æ”¶ä¸è´¢åŠ¡ã€å’Œã€ŒğŸ†äººæ‰æ¿€åŠ±ã€ä¸¤ä¸ªç‹¬ç«‹æœç´¢ç»´åº¦<br>
        â€¢ ğŸ“Š ç¨æ”¶ï¼šè‡ªåŠ¨æœç´¢ç ”å‘åŠ è®¡æ‰£é™¤200%ã€ä¼ä¸šæ‰€å¾—ç¨15%ã€å¢å€¼ç¨å³å¾å³é€€<br>
        â€¢ ğŸ† äººæ‰ï¼šè‡ªåŠ¨æœç´¢é‡ç‚¹äº§ä¸šäººæ‰å¥–åŠ±ï¼ˆ150ä¸‡/äººï¼‰ã€é«˜å±‚æ¬¡äººæ‰è½æˆ·ã€ç§‘æŠ€æˆæœè½¬åŒ–å¥–åŠ±<br>
        <b>2. Step 0 ä¼ä¸šä¿¡æ¯è¡¥å…¨ï¼š</b>æœæ”¿ç­–å‰å…ˆæœä¼ä¸šæœ¬èº«<br>
        â€¢ å‘ç°å®é™…åŠå…¬åœ°å€ï¼ˆå¯èƒ½â‰ æ³¨å†Œåœ°å€ï¼‰â†’ åŒæ—¶æœä¸¤ä¸ªåŒºçš„æ”¿ç­–<br>
        â€¢ å‘ç°æ ¸å¿ƒäº§å“/æŠ€æœ¯è·¯çº¿ â†’ æœç´¢è¯æ›´ç²¾å‡†<br>
        â€¢ å‘ç°å·²è·èµ„è´¨ï¼ˆé«˜ä¼/ä¸“ç²¾ç‰¹æ–°ï¼‰â†’ é¿å…é‡å¤æœç´¢å·²æœ‰è®¤å®š<br>
        â€¢ å‘ç°åˆ›å§‹äººèƒŒæ™¯ï¼ˆæµ·å½’/åšå£«ï¼‰â†’ è§¦å‘é«˜å±‚æ¬¡äººæ‰æ”¿ç­–<br>
        <b>3. è¯„åˆ†æƒé‡è°ƒæ•´ï¼š</b>â°ç´§è¿«æ€§ 15%â†’25%ï¼Œâœ…å¯å¾—æ€§ 20%â†’10%<br>
        â€¢ å¯å¾—æ€§ä½â‰ æ·˜æ±°ï¼Œè€Œæ˜¯æ”¹è¿›å»ºè®®æ–¹å‘<br>
        â€¢ æ—¶æ•ˆæ€§æ˜¯ç¡¬æ ‡å‡†ï¼Œè¿‡æœŸæ”¿ç­–å¿…é¡»ä½“ç°
      </div>
      <hr style="margin:12px 0;border:none;border-top:1px solid #eee;">
      <div style="font-size:14px; font-weight:600; color:#1a73e8; margin-bottom:8px;">v0.17 â€” 2026-02-14 5ç»´åº¦æ”¿ç­–è¯„åˆ†ä½“ç³»</div>
      <div style="font-size:12px; color:#666; line-height:1.8;">
        <b>ä¸»è¦æ”¹è¿›ï¼š</b>ä»å•ä¸€"ç›¸å…³åº¦"è¯„åˆ†å‡çº§ä¸º5ç»´åº¦åŠ æƒè¯„åˆ†ä½“ç³»ã€‚<br>
        <b>5ç»´åº¦ï¼š</b><br>
        â€¢ ğŸ’° é‡‘é¢ä»·å€¼ï¼ˆ30%ï¼‰â€” ä¼ä¸šèƒ½æ‹¿åˆ°å¤šå°‘é’±ï¼ŒS/A/B/C/Dåˆ†çº§<br>
        â€¢ ğŸ¯ ç‹¬å æ€§ï¼ˆ25%ï¼‰â€” ç«äº‰å¯¹æ‰‹å¤šä¸å¤šï¼Œä»å®šåˆ¶å‹åˆ°æ™®æƒ å‹<br>
        â€¢ âœ… å¯å¾—æ€§ï¼ˆ20%ï¼‰â€” ä¼ä¸šå½“å‰èƒ½å¦æ»¡è¶³ç”³æŠ¥æ¡ä»¶<br>
        â€¢ â° ç´§è¿«æ€§ï¼ˆ15%ï¼‰â€” ç”³æŠ¥çª—å£è¿˜å‰©å¤šä¹…ï¼Œè¿‡æœŸæ”¿ç­–å¼ºåˆ¶é™åˆ†<br>
        â€¢ ğŸ”„ æŒç»­æ€§ï¼ˆ10%ï¼‰â€” ä¸€æ¬¡æ€§è¿˜æ˜¯å¯åå¤è·å¾—<br>
        <b>å…¶ä»–æ”¹è¿›ï¼š</b><br>
        â€¢ æ±‡æ€»è¡¨æ ¼å±•ç¤º5ç»´åº¦å­åˆ†å’Œé‡‘é¢ç­‰çº§<br>
        â€¢ æ—¥å¿—æ–‡ä»¶è®°å½•å®Œæ•´è¯„åˆ†æ˜ç»†å’Œç†ç”±<br>
        â€¢ è¿‡æœŸæ”¿ç­–ç´§è¿«æ€§å¼ºåˆ¶ä¸º0ï¼Œç»¼åˆåˆ†ä¸Šé™35
      </div>
      <hr style="margin:12px 0;border:none;border-top:1px solid #eee;">
      <div style="font-size:14px; font-weight:600; color:#1a73e8; margin-bottom:8px;">v0.16 â€” 2026-02-14 æœç´¢æ—¶æ•ˆæ€§ä¼˜åŒ–</div>
      <div style="font-size:12px; color:#666; line-height:1.8;">
        <b>ä¸»è¦é—®é¢˜ï¼š</b>æœç´¢ç»“æœä¸­å¤§é‡è¿”å›å·²è¿‡æœŸæ”¿ç­–ï¼ˆåå››äº”å·²ç»“æŸï¼‰ï¼ŒåŒæ—¶æœä¸åˆ°2026å¹´æ–°æ”¿ç­–ã€‚<br>
        <b>ä¿®æ”¹æ–¹å¼ï¼š</b><br>
        â€¢ æœç´¢è¯è‡ªåŠ¨åŠ å…¥å½“å‰å¹´ä»½ï¼ˆå¦‚â€œ2026â€ã€â€œåäº”äº”â€ï¼‰<br>
        â€¢ æœç´¢æ—¶è‡ªåŠ¨æå–æ”¿ç­–æœ‰æ•ˆæœŸå’Œç”³æŠ¥æˆªæ­¢æ—¥æœŸ<br>
        â€¢ è¿‡æœŸæ”¿ç­–è‡ªåŠ¨é™ä½è¯„åˆ†ï¼ˆä¸å†æ’åœ¨å‰é¢ï¼‰<br>
        â€¢ å›è·¯è¯„ä¼°æ–°å¢æ—¶æ•ˆæ€§æ£€æŸ¥ï¼Œå‘ç°å…¨è¿‡æœŸæ—¶è‡ªåŠ¨è¡¥æœæ–°æ”¿ç­–<br>
        â€¢ æœç´¢æ—¶é—´é¢„ç®—ä»3åˆ†é’Ÿå¢åŠ åˆ°6åˆ†é’Ÿï¼Œæœ€å¤š3è½®æœç´¢
      </div>
    </div>
  </div>
</div>

<!-- ========== ç¬¬äºŒæ­¥ï¼šå±•ç¤ºå…¬å¸ä¿¡æ¯ ========== -->
<div class="container hidden" id="step2">
  <!-- å…¬å¸ä¿¡æ¯å¡ -->
  <div class="card">
    <div class="card-title">ğŸ¢ ä¼ä¸šåŸºæœ¬ä¿¡æ¯</div>
    <div class="info-table" id="companyInfo"></div>
  </div>

  <!-- æ“ä½œæŒ‰é’® -->
  <div class="card">
    <div class="card-title">ğŸ§  æ™ºèƒ½æœç´¢</div>
    <p style="font-size:13px; color:#666; margin-bottom:14px; line-height:1.5;">
      AI åˆ†æä¼ä¸šä¿¡æ¯ï¼Œè‡ªåŠ¨æ‹†åˆ†å¤šå±‚æœç´¢ä»»åŠ¡ï¼ˆåŸºç¡€å±‚ã€å‘å±•å±‚ã€äººæ‰å±‚ã€è£èª‰å±‚ï¼‰ï¼Œæ™ºèƒ½åŒ¹é…æ”¿åºœå¥–åŠ±/æ‰¶æŒæ”¿ç­–ã€‚
    </p>
    <button class="btn btn-success" onclick="startPolicySearch()">ğŸš€ å¼€å§‹æ™ºèƒ½æœç´¢</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="goBack()">â† é‡æ–°æŸ¥è¯¢</button>
  </div>
</div>

<!-- ========== ç¬¬ä¸‰æ­¥ï¼šæ”¿ç­–æœç´¢ç»“æœ ========== -->
<div class="container hidden" id="step3">
  <!-- æœç´¢ä¸­ï¼ˆspinner + æ€è€ƒè¿‡ç¨‹ï¼‰ -->
  <div class="card" id="searchingCard">
    <div class="loading">
      <div class="spinner"></div>
      <div class="loading-text" id="searchStatus">æ­£åœ¨æœç´¢æ”¿ç­–...</div>
    </div>

    <!-- AI æ€è€ƒè¿‡ç¨‹ -->
    <div class="thinking-panel" id="thinkingPanel">
      <!-- 0. ä¼ä¸šä¿¡æ¯è¡¥å…¨ -->
      <div class="thinking-section" id="thinkSection0">
        <div class="thinking-header">
          <span class="icon">ğŸ”</span>
          <span>ä¼ä¸šä¿¡æ¯è¡¥å…¨</span>
          <span class="badge" id="thinkBadge0">ç­‰å¾…ä¸­</span>
        </div>
        <div class="thinking-body" id="thinkBody0"></div>
      </div>

      <!-- 1. ä¼ä¸šç”»åƒ -->
      <div class="thinking-section" id="thinkSection1">
        <div class="thinking-header">
          <span class="icon">ğŸ”</span>
          <span>ä¼ä¸šç‰¹å¾åˆ†æ</span>
          <span class="badge" id="thinkBadge1">ç­‰å¾…ä¸­</span>
        </div>
        <div class="thinking-body" id="thinkBody1"></div>
      </div>

      <!-- 2. æœç´¢ç­–ç•¥ -->
      <div class="thinking-section" id="thinkSection2">
        <div class="thinking-header">
          <span class="icon">ğŸ§ </span>
          <span>æœç´¢ç­–ç•¥</span>
          <span class="badge" id="thinkBadge2">ç­‰å¾…ä¸­</span>
        </div>
        <div class="thinking-body" id="thinkBody2"></div>
      </div>

      <!-- 3. æœç´¢è¿›åº¦ -->
      <div class="thinking-section" id="thinkSection3">
        <div class="thinking-header">
          <span class="icon">ğŸ“¡</span>
          <span>æœç´¢è¿›åº¦</span>
          <span class="badge" id="thinkBadge3">ç­‰å¾…ä¸­</span>
        </div>
        <div class="thinking-body" id="thinkBody3"></div>
      </div>

      <!-- 4. è¯„å®¡ -->
      <div class="thinking-section" id="thinkSection4">
        <div class="thinking-header">
          <span class="icon">ğŸ“Š</span>
          <span>è´¨é‡è¯„å®¡</span>
          <span class="badge" id="thinkBadge4">ç­‰å¾…ä¸­</span>
        </div>
        <div class="thinking-body" id="thinkBody4"></div>
      </div>
    </div>
  </div>

  <!-- æœç´¢æ—¥å¿—ï¼ˆæŠ˜å ï¼‰ -->
  <div class="card" id="logCard">
    <div class="card-title" style="cursor:pointer;" onclick="toggleLog()">
      ğŸ“‹ æœç´¢æ—¥å¿—ï¼ˆè¯¦ç»†ï¼‰
      <span id="logToggle" style="font-size:12px; color:#999; font-weight:400; margin-left:auto;">â–¶</span>
    </div>
    <div class="log-area hidden" id="searchLog" style="max-height:300px;"></div>
  </div>

  <!-- ç»“æœ -->
  <div class="card hidden" id="resultCard">
    <div class="card-title">ğŸ¯ æœç´¢ç»“æœ <span id="resultCount" style="font-size:12px; color:#999; font-weight:400;"></span></div>
    <div id="policyList"></div>
  </div>

  <div class="hidden" id="resultActions" style="margin-bottom:20px;">
    <button class="btn btn-success" onclick="goToSummary()">ğŸ“Š è¿›å…¥æ”¿ç­–æ±‡æ€»</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="startPolicySearch()">ğŸ”„ é‡æ–°æœç´¢</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="goBack()">â† è¿”å›æŸ¥è¯¢</button>
  </div>
</div>

<!-- ========== ç¬¬å››æ­¥ï¼šæ”¿ç­–æ±‡æ€» ========== -->
<div class="container hidden" id="step4">
  <div class="card">
    <div class="card-title">ğŸ“Š æ”¿ç­–æ±‡æ€»æ’å</div>
    <p style="font-size:13px; color:#666; margin-bottom:8px; line-height:1.5;">
      æŒ‰ä¸šåŠ¡å±‚åˆ†ç»„ï¼Œ5ç»´åº¦åŠ æƒè¯„åˆ†æ’åºã€‚
    </p>
    <div style="font-size:11px;color:#888;margin-bottom:12px;line-height:1.6;background:#f8f9fa;padding:8px 10px;border-radius:6px;">
      ğŸ’°é‡‘é¢ä»·å€¼(30%) Â· ğŸ¯ç‹¬å æ€§(25%) Â· âœ…å¯å¾—æ€§(20%) Â· â°ç´§è¿«æ€§(15%) Â· ğŸ”„æŒç»­æ€§(10%)<br>
      é‡‘é¢ç­‰çº§ï¼š<b style="color:#c62828">S</b>>500ä¸‡ Â· <b style="color:#e37400">A</b>100-500ä¸‡ Â· <b style="color:#1a73e8">B</b>20-100ä¸‡ Â· C<20ä¸‡
    </div>
    <div id="summaryContent"></div>
  </div>

  <div style="margin-bottom:20px;">
    <button class="btn btn-success" onclick="setStep(5)">ğŸ’¡ è€å§šçš„ä¸‹ä¸€æ­¥æƒ³æ³• â†’</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="setStep(3)">â† è¿”å›æœç´¢ç»“æœ</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="startPolicySearch()">ğŸ”„ é‡æ–°æœç´¢</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="goBack()">â† è¿”å›æŸ¥è¯¢</button>
  </div>
</div>

<!-- ========== ç¬¬äº”æ­¥ï¼šè€å§šçš„æƒ³æ³• ========== -->
<div class="container hidden" id="step5">
  <div class="card" style="border-left:3px solid #7b1fa2;">
    <div class="card-title">ğŸ’¡ è€å§šçš„ä¸‹ä¸€æ­¥æƒ³æ³•</div>
    <div style="font-size:13px;line-height:1.8;color:#444;">
      <p style="margin-bottom:10px;"><b>1.</b> ä¸“å®¶ç³»ç»ŸæŒç»­å­¦ä¹  â€” å»ºç«‹æ¡ˆä¾‹è¾“å…¥æ¥å£å’Œç”³è¯· Track ç³»ç»Ÿï¼Œè¶Šç”¨è¶Šæ™ºèƒ½</p>
      <p style="margin-bottom:10px;"><b>2.</b> æ”¿ç­–æ²‰æ·€å»é‡ â€” æ„å»ºè‡ªæœ‰æ”¿ç­–æ•°æ®æ–‡æ¡£åº“ï¼Œé¿å…é‡å¤æœç´¢</p>
      <p style="margin-bottom:10px;"><b>3.</b> Evaluation ç³»ç»Ÿ â€” æ¯æ¬¡æœç´¢è‡ªåŠ¨æ‰“åˆ†ï¼ˆå‘½ä¸­ç‡/è¦†ç›–åº¦/åœ°åŸŸç²¾å‡†/å¯ç”³æŠ¥æ¯”/ç¨³å®šæ€§/æ—¶æ•ˆæ€§/Tokenæ•ˆç‡ï¼‰ï¼Œä½åˆ†è‡ªåŠ¨è§¦å‘è¯Šæ–­ï¼Œè¶‹åŠ¿æ›²çº¿æŒç»­ä¼˜åŒ–</p>
      <p style="margin-bottom:10px;"><b>4.</b> Orchestrator é‡æ„ â€” ä»è§„åˆ™å †ç Œåˆ°è¯„ä¼°é©±åŠ¨ï¼Œè§„åˆ™å°‘è€Œç²¾</p>
      <p style="margin-bottom:10px;"><b>5.</b> Browser Use å®šä½ â€” æ·±åº¦æœç´¢åœºæ™¯ï¼Œä¸åšå¹¿åº¦è¦†ç›–</p>
      <p style="margin-bottom:10px;"><b>6.</b> æ”¿ç­–æœ‰æ•ˆæœŸä¼˜åŒ– â€” åŒºåˆ†ä¸€æ¬¡æ€§å’Œ Recurring ç±»å‹</p>
      <p style="margin-bottom:10px;"><b>7.</b> æœç´¢ç¨³å®šæ€§ â€” åŸºç¡€æœç´¢è¯å›ºå®šï¼ˆæ¨¡æ¿å¿…æœï¼‰ï¼ŒAI åªç”Ÿæˆè¡¥å……è¯ï¼Œç¡®å®šæ€§ä¸äº¤ç»™æ¦‚ç‡æ¨¡å‹</p>
      <p style="margin-bottom:10px;"><b>8.</b> åˆ†æåŒ¹é… + å»ºè®®æŠ¥å‘Š â€” æ”¿ç­–æ¡ä»¶ä¸ä¼ä¸šæ•°æ®é€é¡¹å¯¹æ¯”ï¼Œè¾“å‡ºæ¨èç”³æŠ¥æ¸…å•ã€å·®è·è¡¥é½è·¯å¾„ã€æ—¶é—´çº¿è§„åˆ’ï¼Œä»"ä¿¡æ¯æ¬è¿"å‡çº§åˆ°"å†³ç­–è¾…åŠ©"</p>
    </div>
  </div>

  <div class="card" style="border-left:3px solid #1a73e8;">
    <div class="card-title">ğŸ“‹ v0.18 å·²å®è£…åŠŸèƒ½</div>
    <div style="font-size:13px;line-height:1.8;color:#444;">
      <p style="margin-bottom:8px;"><b>æœç´¢å¼•æ“</b></p>
      <p style="margin-bottom:6px;">âœ… 7ç»´åº¦æœç´¢æ¡†æ¶ï¼ˆç©ºé—´è½½ä½“/äº§ä¸šé“¾/èº«ä»½å±æ€§/äººåŠ›èµ„æº/åˆè§„/ç¨æ”¶ä¸è´¢åŠ¡/äººæ‰æ¿€åŠ±ï¼‰</p>
      <p style="margin-bottom:6px;">âœ… Step 0 ä¼ä¸šä¿¡æ¯è¡¥å…¨ï¼ˆæœæ”¿ç­–å‰å…ˆæœä¼ä¸šè‡ªèº«ä¿¡æ¯ï¼‰</p>
      <p style="margin-bottom:6px;">âœ… æ—¶æ•ˆæ€§æœç´¢ä¼˜åŒ–ï¼ˆæœç´¢è¯å«å¹´ä»½ï¼Œè¿‡æœŸæ”¿ç­–é™åˆ†ï¼‰</p>
      <p style="margin-bottom:6px;">âœ… 3è½®æœç´¢å›è·¯ + è´¨é‡è¯„å®¡</p>
      <p style="margin-bottom:8px;"><b>è¯„åˆ†ä½“ç³»</b></p>
      <p style="margin-bottom:6px;">âœ… 5ç»´åº¦åŠ æƒè¯„åˆ†ï¼ˆğŸ’°é‡‘é¢30% ğŸ¯ç‹¬å æ€§25% â°ç´§è¿«æ€§25% âœ…å¯å¾—æ€§10% ğŸ”„æŒç»­æ€§10%ï¼‰</p>
      <p style="margin-bottom:6px;">âœ… é‡‘é¢åˆ†çº§ S/A/B/C/D</p>
      <p style="margin-bottom:6px;">âœ… å®Œæ•´è¯„åˆ†æ—¥å¿—å’Œç†ç”±</p>
      <p style="margin-bottom:8px;"><b>å¾…å®è£…</b></p>
      <p style="margin-bottom:6px;">â¬œ æ¥å…¥ä¼æŸ¥æŸ¥ APIï¼ˆçœŸå®å·¥å•†æ•°æ®ï¼‰</p>
      <p style="margin-bottom:6px;">â¬œ æœç´¢ç¨³å®šæ€§ï¼ˆåŸºç¡€æœç´¢è¯æ¨¡æ¿å›ºå®šï¼‰</p>
      <p style="margin-bottom:6px;">â¬œ æ”¿ç­–æ²‰æ·€å»é‡ï¼ˆæ•°æ®åº“ï¼‰</p>
      <p style="margin-bottom:0;">â¬œ å»ºè®®æŠ¥å‘Šç”Ÿæˆï¼ˆæ¨èæ¸…å•+å·®è·è·¯å¾„+æ—¶é—´çº¿ï¼‰</p>
    </div>
  </div>

  <div style="margin-bottom:20px;">
    <button class="btn btn-outline" onclick="setStep(4)">â† è¿”å›æ”¿ç­–æ±‡æ€»</button>
    <button class="btn btn-outline" style="margin-top:10px;" onclick="goBack()">â† è¿”å›æŸ¥è¯¢</button>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Mock ä¼æŸ¥æŸ¥æ•°æ®ï¼ˆåŸºäºçœŸå®å…¬å¼€å·¥å•†ä¿¡æ¯æ„å»ºï¼Œç»“æ„å¯¹é½ä¼æŸ¥æŸ¥ OpenAPI 735/410/950/514/731ï¼‰
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const MOCK_COMPANIES = {

  // â”€â”€ ä¼ä¸š1ï¼šä¸Šæµ·å…‰é€šä¿¡ä¸­å°ä¼ä¸š â”€â”€
  "ä¸Šæµ·è¿å‡¡é¢†å…‰é€šä¿¡æœ‰é™å…¬å¸": {
    // ===== å·¥å•†åŸºæœ¬ä¿¡æ¯ï¼ˆAPI 410 / 735ï¼‰=====
    company_name: "ä¸Šæµ·è¿å‡¡é¢†å…‰é€šä¿¡æœ‰é™å…¬å¸",
    legal_person: "å¼ æŸ",
    registered_capital: "100ä¸‡äººæ°‘å¸",
    registered_capital_amount: "100",
    registered_capital_unit: "ä¸‡",
    registered_capital_ccy: "CNY",
    paid_up_capital: "100ä¸‡äººæ°‘å¸",
    established_date: "2023-11-23",
    status: "å­˜ç»­ï¼ˆåœ¨è¥ã€å¼€ä¸šã€åœ¨å†Œï¼‰",
    registered_address: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒºç¢§æ³¢è·¯690å·6å¹¢301å®¤",
    district: "æµ¦ä¸œæ–°åŒº",
    province: "ä¸Šæµ·",
    city: "ä¸Šæµ·å¸‚",
    county: "æµ¦ä¸œæ–°åŒº",
    industry: "å…‰é€šä¿¡è®¾å¤‡åˆ¶é€ ",
    industry_code: "C",
    industry_desc: "åˆ¶é€ ä¸š",
    sub_industry_code: "39",
    sub_industry_desc: "è®¡ç®—æœºã€é€šä¿¡å’Œå…¶ä»–ç”µå­è®¾å¤‡åˆ¶é€ ä¸š",
    company_type: "æœ‰é™è´£ä»»å…¬å¸ï¼ˆè‡ªç„¶äººæŠ•èµ„æˆ–æ§è‚¡ï¼‰",
    scale: "å°å¾®ä¼ä¸š",
    person_scope: "å°‘äº50äºº",
    insured_count: "12",
    business_scope: "å…‰é€šä¿¡è®¾å¤‡ã€å…‰ç”µå­å™¨ä»¶çš„ç ”å‘ã€ç”Ÿäº§å’Œé”€å”®ï¼›å…‰æ¨¡å—ã€å…‰çº¤è¿æ¥å™¨åŠç»„ä»¶çš„æŠ€æœ¯å¼€å‘ä¸æŠ€æœ¯æœåŠ¡ï¼›é€šä¿¡æŠ€æœ¯å’¨è¯¢ï¼›è´§ç‰©åŠæŠ€æœ¯çš„è¿›å‡ºå£ä¸šåŠ¡ï¼ˆä¾æ³•é¡»ç»æ‰¹å‡†çš„é¡¹ç›®ï¼Œç»ç›¸å…³éƒ¨é—¨æ‰¹å‡†åæ–¹å¯å¼€å±•ç»è¥æ´»åŠ¨ï¼‰",
    social_credit_code: "91310115MACPN3YL2B",
    org_no: "MACPN3YL-2",
    belong_org: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¸‚åœºç›‘ç£ç®¡ç†å±€",
    term_start: "2023-11-23",
    term_end: "2053-11-22",
    check_date: "2023-11-23",
    is_on_stock: "0",
    english_name: "Shanghai Yufanling Optical Communication Co., Ltd.",
    tags: ["å°å¾®ä¼ä¸š", "å…‰é€šä¿¡", "æµ¦ä¸œæ–°åŒº", "ç§‘æŠ€å‹ä¸­å°ä¼ä¸š"],

    // ===== ä¼ä¸šæ ‡ç­¾/ç”»åƒï¼ˆAPI 735 TagListï¼‰=====
    tag_list: [
      { type: "903", name: "å­˜ç»­" },
      { type: "91", name: "ç§‘æŠ€å‹ä¸­å°ä¼ä¸š" },
      { type: "100", name: "å°å¾®ä¼ä¸š" }
    ],

    // ===== è‚¡ä¸œä¿¡æ¯ï¼ˆAPI 731 / 735 Partnersï¼‰=====
    shareholders: [
      {
        stock_name: "å¼ æŸ",
        stock_type: "è‡ªç„¶äººè‚¡ä¸œ",
        stock_percent: "70.00%",
        should_capi: "70ä¸‡",
        subscribed_capital: "70",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2043-11-22",
        tags_list: ["å¤§è‚¡ä¸œ", "å®é™…æ§åˆ¶äºº", "æœ€ç»ˆå—ç›Šäºº"],
        final_benefit_percent: "70.00%"
      },
      {
        stock_name: "ææŸ",
        stock_type: "è‡ªç„¶äººè‚¡ä¸œ",
        stock_percent: "30.00%",
        should_capi: "30ä¸‡",
        subscribed_capital: "30",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2043-11-22",
        tags_list: [],
        final_benefit_percent: "30.00%"
      }
    ],

    // ===== ä¸»è¦äººå‘˜ï¼ˆAPI 735 Employeesï¼‰=====
    employees: [
      { name: "å¼ æŸ", job: "æ‰§è¡Œè‘£äº‹å…¼æ€»ç»ç†" },
      { name: "ææŸ", job: "ç›‘äº‹" }
    ],

    // ===== èèµ„ä¿¡æ¯ï¼ˆAPI 950ï¼‰=====
    financing: [],   // æš‚æ— èèµ„è®°å½•

    // ===== ä¸“åˆ©ä¿¡æ¯ï¼ˆAPI 514ï¼‰=====
    patents: [
      {
        title: "ä¸€ç§é«˜é€Ÿå…‰é€šä¿¡æ¨¡å—çš„æ•£çƒ­ç»“æ„",
        application_number: "CN202311567890.1",
        application_date: "2023-12-15",
        publication_number: "CN117498942A",
        publication_date: "2024-04-02",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "å®è´¨å®¡æŸ¥",
        ipc_list: ["H04B"],
        ipc_desc: ["ç”µé€šä¿¡æŠ€æœ¯"],
        inventor_list: ["å¼ æŸ", "ç‹æŸ"],
        assignee_list: ["ä¸Šæµ·è¿å‡¡é¢†å…‰é€šä¿¡æœ‰é™å…¬å¸"]
      }
    ],

    // ===== è½¯ä»¶è‘—ä½œæƒï¼ˆAPI 233ï¼‰=====
    copyrights: [],

    // ===== é£é™©ä¿¡æ¯ =====
    risk_info: "æ— é£é™©è®°å½•",

    // ===== è”ç³»ä¿¡æ¯ï¼ˆAPI 735 ContactInfoï¼‰=====
    contact_info: {
      phone_number: "021-5080XXXX",
      email: "info@yufanling.com",
      website: []
    },

    // ===== å˜æ›´è®°å½•ï¼ˆAPI 735 ChangeRecordsï¼‰=====
    change_records: [],

    // ===== å¹´æŠ¥ç¤¾ä¿ï¼ˆAPI 213ï¼‰=====
    headcount_history: { "2024": 12 }
  },

  // â”€â”€ ä¼ä¸š2ï¼šè‹å· VCSEL èŠ¯ç‰‡ä¸­å°ä¼ä¸šï¼ˆçœŸå®ä¼ä¸š â€” å…¬å¼€ä¿¡æ¯ï¼‰â”€â”€
  "è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸": {
    // ===== å·¥å•†åŸºæœ¬ä¿¡æ¯ =====
    company_name: "è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸",
    legal_person: "é™ˆæ™“è¿Ÿ",
    registered_capital: "3571.4286ä¸‡ç¾å…ƒ",
    registered_capital_amount: "3571.4286",
    registered_capital_unit: "ä¸‡",
    registered_capital_ccy: "USD",
    paid_up_capital: "3571.4286ä¸‡ç¾å…ƒ",
    established_date: "2015-12-02",
    status: "å­˜ç»­ï¼ˆåœ¨è¥ã€å¼€ä¸šã€åœ¨å†Œï¼‰",
    registered_address: "å¸¸å·å¸‚æ­¦è¿›å›½å®¶é«˜æ–°æŠ€æœ¯äº§ä¸šå¼€å‘åŒºå‡¤ç¿”è·¯11å·6å·æ¥¼",
    district: "æ­¦è¿›åŒº",
    province: "æ±Ÿè‹",
    city: "å¸¸å·å¸‚",
    county: "æ­¦è¿›åŒº",
    industry: "åŠå¯¼ä½“å™¨ä»¶ä¸“ç”¨è®¾å¤‡åˆ¶é€ ",
    industry_code: "C",
    industry_desc: "åˆ¶é€ ä¸š",
    sub_industry_code: "39",
    sub_industry_desc: "è®¡ç®—æœºã€é€šä¿¡å’Œå…¶ä»–ç”µå­è®¾å¤‡åˆ¶é€ ä¸š",
    company_type: "æœ‰é™è´£ä»»å…¬å¸ï¼ˆå¤–å•†æŠ•èµ„ä¼ä¸šä¸å†…èµ„åˆèµ„ï¼‰",
    scale: "ä¸­å‹ä¼ä¸š",
    person_scope: "100-499äºº",
    insured_count: "286",
    business_scope: "åŠå¯¼ä½“æ¿€å…‰å™¨èŠ¯ç‰‡ã€å…‰é€šä¿¡å™¨ä»¶ã€ä¼ æ„Ÿå™¨åŠç›¸å…³ç”µå­å…ƒå™¨ä»¶çš„ç ”å‘ã€è®¾è®¡ã€ç”Ÿäº§å’Œé”€å”®ï¼›VCSELï¼ˆå‚ç›´è…”é¢å‘å°„æ¿€å…‰å™¨ï¼‰èŠ¯ç‰‡åŠå¤–å»¶ç‰‡çš„åˆ¶é€ ï¼›å…‰ç”µå­å™¨ä»¶å°è£…æµ‹è¯•ï¼›æŠ€æœ¯å’¨è¯¢ã€æŠ€æœ¯æœåŠ¡ã€æŠ€æœ¯è½¬è®©ï¼›è‡ªè¥å’Œä»£ç†å„ç±»å•†å“å’ŒæŠ€æœ¯çš„è¿›å‡ºå£ä¸šåŠ¡ï¼ˆä¾æ³•é¡»ç»æ‰¹å‡†çš„é¡¹ç›®ï¼Œç»ç›¸å…³éƒ¨é—¨æ‰¹å‡†åæ–¹å¯å¼€å±•ç»è¥æ´»åŠ¨ï¼‰",
    social_credit_code: "91320412MA1MYECR0P",
    org_no: "MA1MYECR-0",
    belong_org: "å¸¸å·å¸‚æ­¦è¿›åŒºå¸‚åœºç›‘ç£ç®¡ç†å±€",
    term_start: "2015-12-02",
    term_end: "2045-12-01",
    check_date: "2023-06-15",
    is_on_stock: "0",
    english_name: "Vertilite Co., Ltd.",
    tags: ["ä¸­å‹ä¼ä¸š", "VCSEL", "åŠå¯¼ä½“", "é«˜æ–°æŠ€æœ¯ä¼ä¸š", "æ±Ÿè‹çœä¸“ç²¾ç‰¹æ–°"],

    // ===== ä¼ä¸šæ ‡ç­¾/ç”»åƒ =====
    tag_list: [
      { type: "903", name: "å­˜ç»­" },
      { type: "3", name: "Cè½®" },
      { type: "108", name: "é«˜æ–°æŠ€æœ¯ä¼ä¸š" },
      { type: "91", name: "ç§‘æŠ€å‹ä¸­å°ä¼ä¸š" },
      { type: "95", name: "æ±Ÿè‹çœæ°‘è¥ç§‘æŠ€ä¼ä¸š" },
      { type: "110", name: "ä¸“ç²¾ç‰¹æ–°" }
    ],

    // ===== è‚¡ä¸œä¿¡æ¯ =====
    shareholders: [
      {
        stock_name: "é™ˆæ™“è¿Ÿ",
        stock_type: "è‡ªç„¶äººè‚¡ä¸œ",
        stock_percent: "23.45%",
        should_capi: "837.32ä¸‡ç¾å…ƒ",
        subscribed_capital: "837.32",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "USD",
        shoud_date: "2025-12-01",
        tags_list: ["å¤§è‚¡ä¸œ", "å®é™…æ§åˆ¶äºº", "æœ€ç»ˆå—ç›Šäºº"],
        final_benefit_percent: "23.45%"
      },
      {
        stock_name: "æ­¦æ±‰å…‰è°·çƒ½ç«åˆ›ä¸šæŠ•èµ„æœ‰é™å…¬å¸",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "12.80%",
        should_capi: "457.14ä¸‡ç¾å…ƒ",
        subscribed_capital: "457.14",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "USD",
        shoud_date: "2023-06-30",
        tags_list: [],
        final_benefit_percent: "12.80%",
        related_product: { name: "çºµæ…§èŠ¯å…‰", round: "Bè½®", financing_count: "5" }
      },
      {
        stock_name: "è‹å·å…ƒç¦¾æ§è‚¡è‚¡ä»½æœ‰é™å…¬å¸",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "8.60%",
        should_capi: "307.14ä¸‡ç¾å…ƒ",
        subscribed_capital: "307.14",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "USD",
        shoud_date: "2023-06-30",
        tags_list: [],
        final_benefit_percent: "8.60%",
        related_product: { name: "çºµæ…§èŠ¯å…‰", round: "Aè½®", financing_count: "5" }
      },
      {
        stock_name: "å®æ³¢æ¢…å±±ä¿ç¨æ¸¯åŒºåšç‘æ€è¾¾æŠ•èµ„ç®¡ç†åˆä¼™ä¼ä¸šï¼ˆæœ‰é™åˆä¼™ï¼‰",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "6.50%",
        should_capi: "232.14ä¸‡ç¾å…ƒ",
        subscribed_capital: "232.14",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "USD",
        shoud_date: "2023-06-30",
        tags_list: [],
        final_benefit_percent: "6.50%"
      },
      {
        stock_name: "å…¶ä»–è‚¡ä¸œï¼ˆåˆè®¡ï¼‰",
        stock_type: "æ··åˆ",
        stock_percent: "48.65%",
        should_capi: "1737.70ä¸‡ç¾å…ƒ",
        subscribed_capital: "1737.70",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "USD",
        shoud_date: "",
        tags_list: [],
        final_benefit_percent: ""
      }
    ],

    // ===== ä¸»è¦äººå‘˜ =====
    employees: [
      { name: "é™ˆæ™“è¿Ÿ", job: "è‘£äº‹é•¿å…¼æ€»ç»ç†" },
      { name: "ç‹æ—­ä¸œ", job: "è‘£äº‹" },
      { name: "å‘¨å®", job: "è‘£äº‹" },
      { name: "å¼ å³°", job: "ç›‘äº‹" }
    ],

    // ===== èèµ„ä¿¡æ¯ï¼ˆAPI 950ï¼‰â€” çœŸå®å…¬å¼€èèµ„è®°å½• =====
    financing: [
      {
        date: "2016-09-01",
        product_name: "çºµæ…§èŠ¯å…‰",
        round: "å¤©ä½¿è½®",
        amount: "æ•°åƒä¸‡äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "å…ƒç¦¾æ§è‚¡",
        news_url: ""
      },
      {
        date: "2017-12-15",
        product_name: "çºµæ…§èŠ¯å…‰",
        round: "Aè½®",
        amount: "æ•°åƒä¸‡äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "æ­¦å²³å³°èµ„æœ¬ã€å…ƒç¦¾æ§è‚¡",
        news_url: ""
      },
      {
        date: "2019-03-20",
        product_name: "çºµæ…§èŠ¯å…‰",
        round: "Bè½®",
        amount: "è¿‡äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "å…‰è°·çƒ½ç«åˆ›æŠ•ã€æ­¦å²³å³°èµ„æœ¬ã€å…ƒç¦¾æ§è‚¡",
        news_url: ""
      },
      {
        date: "2021-06-10",
        product_name: "çºµæ…§èŠ¯å…‰",
        round: "Cè½®",
        amount: "æ•°äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "ä¸­èŠ¯èšæºã€å…‰è°·çƒ½ç«åˆ›æŠ•ã€æ­¦å²³å³°èµ„æœ¬",
        news_url: ""
      },
      {
        date: "2023-01-18",
        product_name: "çºµæ…§èŠ¯å…‰",
        round: "C+è½®",
        amount: "æ•°äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "å›½æŠ•åˆ›ä¸šã€ä¸­èŠ¯èšæºã€æ·±åˆ›æŠ•",
        news_url: ""
      }
    ],

    // ===== ä¸“åˆ©ä¿¡æ¯ï¼ˆAPI 514ï¼‰=====
    patents: [
      {
        title: "ä¸€ç§å‚ç›´è…”é¢å‘å°„æ¿€å…‰å™¨åŠå…¶åˆ¶å¤‡æ–¹æ³•",
        application_number: "CN201910872345.6",
        application_date: "2019-09-16",
        publication_number: "CN110571654A",
        publication_date: "2019-12-13",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "æˆæƒ",
        ipc_list: ["H01S"],
        ipc_desc: ["åˆ©ç”¨å—æ¿€å‘å°„çš„å™¨ä»¶"],
        inventor_list: ["é™ˆæ™“è¿Ÿ", "ç‹æ—­ä¸œ"],
        assignee_list: ["è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "é«˜åŠŸç‡å¤šç»“VCSELé˜µåˆ—èŠ¯ç‰‡ç»“æ„",
        application_number: "CN202010456789.3",
        application_date: "2020-05-26",
        publication_number: "CN111697425A",
        publication_date: "2020-09-22",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "æˆæƒ",
        ipc_list: ["H01S"],
        ipc_desc: ["åˆ©ç”¨å—æ¿€å‘å°„çš„å™¨ä»¶"],
        inventor_list: ["é™ˆæ™“è¿Ÿ", "å¼ å·¥"],
        assignee_list: ["è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "ä¸€ç§ç”¨äº3Dä¼ æ„Ÿçš„VCSELèŠ¯ç‰‡å°è£…æ–¹æ³•",
        application_number: "CN202110234567.8",
        application_date: "2021-03-03",
        publication_number: "CN112952548A",
        publication_date: "2021-06-11",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "å®è´¨å®¡æŸ¥",
        ipc_list: ["H01S", "H04B"],
        ipc_desc: ["åˆ©ç”¨å—æ¿€å‘å°„çš„å™¨ä»¶", "ç”µé€šä¿¡æŠ€æœ¯"],
        inventor_list: ["ç‹æ—­ä¸œ", "ææŸ"],
        assignee_list: ["è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "åŸºäºVCSELçš„è½¦è½½LiDARå…‰æºæ¨¡ç»„",
        application_number: "CN202210987654.1",
        application_date: "2022-08-17",
        publication_number: "CN115441316A",
        publication_date: "2022-12-06",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "å®è´¨å®¡æŸ¥",
        ipc_list: ["G01S"],
        ipc_desc: ["æ— çº¿ç”µå®šå‘ï¼›æ— çº¿ç”µå¯¼èˆª"],
        inventor_list: ["é™ˆæ™“è¿Ÿ"],
        assignee_list: ["è‹å·çºµæ…§èŠ¯å…‰åŠå¯¼ä½“ç§‘æŠ€æœ‰é™å…¬å¸"]
      }
    ],

    // ===== è½¯ä»¶è‘—ä½œæƒ =====
    copyrights: [
      {
        name: "VCSELèŠ¯ç‰‡å‚æ•°æµ‹è¯•ç®¡ç†ç³»ç»ŸV1.0",
        category: "åº”ç”¨è½¯ä»¶",
        reg_number: "2020SR0567890",
        reg_date: "2020-04-15",
        first_publish_date: "2019-12-01"
      }
    ],

    // ===== é£é™©ä¿¡æ¯ =====
    risk_info: "æ— é£é™©è®°å½•",

    // ===== è”ç³»ä¿¡æ¯ =====
    contact_info: {
      phone_number: "+86-519-6822-0889",
      email: "info@vertilite.com",
      website: [{ name: "Vertilite", url: "https://www.vertilite.com" }]
    },

    // ===== å˜æ›´è®°å½• =====
    change_records: [
      {
        project_name: "æ³¨å†Œèµ„æœ¬å˜æ›´ï¼ˆæ³¨å†Œèµ„é‡‘ã€èµ„é‡‘æ•°é¢ç­‰å˜æ›´ï¼‰",
        before_content: "2857.1429ä¸‡ç¾å…ƒ",
        after_content: "3571.4286ä¸‡ç¾å…ƒ",
        change_date: "2023-01-20"
      },
      {
        project_name: "æŠ•èµ„äººå˜æ›´ï¼ˆåŒ…æ‹¬å‡ºèµ„é¢ã€å‡ºèµ„æ–¹å¼ã€å‡ºèµ„æ—¥æœŸã€æŠ•èµ„äººåç§°ç­‰ï¼‰",
        before_content: "åŸè‚¡ä¸œåå•...",
        after_content: "æ–°å¢å›½æŠ•åˆ›ä¸šç­‰C+è½®æŠ•èµ„æ–¹...",
        change_date: "2023-01-20"
      }
    ],

    // ===== å¹´æŠ¥ç¤¾ä¿ =====
    headcount_history: { "2021": 158, "2022": 210, "2023": 268, "2024": 286 }
  },

  // â”€â”€ ä¼ä¸š3ï¼šä¸Šæµ· AI èŠ¯ç‰‡ä¸­å°ä¼ä¸šï¼ˆçœŸå®ä¼ä¸š â€” å…¬å¼€ä¿¡æ¯ï¼‰â”€â”€
  "ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸": {
    // ===== å·¥å•†åŸºæœ¬ä¿¡æ¯ =====
    company_name: "ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸",
    legal_person: "èµµç«‹ä¸œ",
    registered_capital: "7584.8215ä¸‡äººæ°‘å¸",
    registered_capital_amount: "7584.8215",
    registered_capital_unit: "ä¸‡",
    registered_capital_ccy: "CNY",
    paid_up_capital: "7584.8215ä¸‡äººæ°‘å¸",
    established_date: "2018-03-19",
    status: "å­˜ç»­ï¼ˆåœ¨è¥ã€å¼€ä¸šã€åœ¨å†Œï¼‰",
    registered_address: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ è¡¡è·¯1000å¼„3å·æ¥¼",
    district: "æµ¦ä¸œæ–°åŒº",
    province: "ä¸Šæµ·",
    city: "ä¸Šæµ·å¸‚",
    county: "æµ¦ä¸œæ–°åŒº",
    industry: "é›†æˆç”µè·¯è®¾è®¡",
    industry_code: "C",
    industry_desc: "åˆ¶é€ ä¸š",
    sub_industry_code: "39",
    sub_industry_desc: "è®¡ç®—æœºã€é€šä¿¡å’Œå…¶ä»–ç”µå­è®¾å¤‡åˆ¶é€ ä¸š",
    company_type: "æœ‰é™è´£ä»»å…¬å¸ï¼ˆè‡ªç„¶äººæŠ•èµ„æˆ–æ§è‚¡çš„æ³•äººç‹¬èµ„ï¼‰",
    scale: "ä¸­å‹ä¼ä¸š",
    person_scope: "500-999äºº",
    insured_count: "652",
    business_scope: "ä»äº‹é›†æˆç”µè·¯ã€äººå·¥æ™ºèƒ½ã€äº‘è®¡ç®—é¢†åŸŸçš„æŠ€æœ¯å¼€å‘ã€æŠ€æœ¯æœåŠ¡ã€æŠ€æœ¯å’¨è¯¢ã€æŠ€æœ¯è½¬è®©ï¼›AIè®­ç»ƒèŠ¯ç‰‡åŠæ¨ç†èŠ¯ç‰‡è®¾è®¡ï¼›é«˜æ€§èƒ½è®¡ç®—åŠ é€Ÿå¡çš„ç ”å‘å’Œé”€å”®ï¼›GPUèŠ¯ç‰‡æ¶æ„è®¾è®¡ï¼›è®¡ç®—æœºè½¯ç¡¬ä»¶çš„ç ”å‘åŠé”€å”®ï¼›è‡ªè¥å’Œä»£ç†å„ç±»å•†å“å’ŒæŠ€æœ¯çš„è¿›å‡ºå£ä¸šåŠ¡ï¼ˆä¾æ³•é¡»ç»æ‰¹å‡†çš„é¡¹ç›®ï¼Œç»ç›¸å…³éƒ¨é—¨æ‰¹å‡†åæ–¹å¯å¼€å±•ç»è¥æ´»åŠ¨ï¼‰",
    social_credit_code: "91310115MA1K3N3T08",
    org_no: "MA1K3N3T-0",
    belong_org: "ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¸‚åœºç›‘ç£ç®¡ç†å±€",
    term_start: "2018-03-19",
    term_end: "2048-03-18",
    check_date: "2024-03-12",
    is_on_stock: "0",
    english_name: "Enflame Technology (Shanghai) Co., Ltd.",
    tags: ["ä¸­å‹ä¼ä¸š", "AIèŠ¯ç‰‡", "é›†æˆç”µè·¯", "æµ¦ä¸œæ–°åŒº", "é«˜æ–°æŠ€æœ¯ä¼ä¸š", "ç‹¬è§’å…½ä¼ä¸š", "ä¸“ç²¾ç‰¹æ–°å°å·¨äºº"],

    // ===== ä¼ä¸šæ ‡ç­¾/ç”»åƒ =====
    tag_list: [
      { type: "903", name: "å­˜ç»­" },
      { type: "3", name: "Dè½®" },
      { type: "108", name: "é«˜æ–°æŠ€æœ¯ä¼ä¸š" },
      { type: "102", name: "ç‹¬è§’å…½ä¼ä¸š" },
      { type: "110", name: "ä¸“ç²¾ç‰¹æ–°å°å·¨äºº" },
      { type: "91", name: "ç§‘æŠ€å‹ä¸­å°ä¼ä¸š" }
    ],

    // ===== è‚¡ä¸œä¿¡æ¯ =====
    shareholders: [
      {
        stock_name: "èµµç«‹ä¸œ",
        stock_type: "è‡ªç„¶äººè‚¡ä¸œ",
        stock_percent: "18.60%",
        should_capi: "1410.78ä¸‡",
        subscribed_capital: "1410.78",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2038-03-18",
        tags_list: ["å¤§è‚¡ä¸œ", "å®é™…æ§åˆ¶äºº", "æœ€ç»ˆå—ç›Šäºº"],
        final_benefit_percent: "18.60%"
      },
      {
        stock_name: "è…¾è®¯æŠ•èµ„",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "14.20%",
        should_capi: "1077.04ä¸‡",
        subscribed_capital: "1077.04",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2028-03-18",
        tags_list: [],
        final_benefit_percent: "14.20%",
        related_product: { name: "ç‡§åŸç§‘æŠ€", round: "Pre-Aè½®", financing_count: "7" }
      },
      {
        stock_name: "ä¸Šæµ·æ­¦å²³å³°é›†æˆç”µè·¯ä¿¡æ¯æŠ€æœ¯åˆ›ä¸šæŠ•èµ„åˆä¼™ä¼ä¸šï¼ˆæœ‰é™åˆä¼™ï¼‰",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "8.30%",
        should_capi: "629.54ä¸‡",
        subscribed_capital: "629.54",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2028-03-18",
        tags_list: [],
        final_benefit_percent: "8.30%",
        related_product: { name: "ç‡§åŸç§‘æŠ€", round: "Aè½®", financing_count: "7" }
      },
      {
        stock_name: "çº¢ç‚¹åˆ›æŠ•",
        stock_type: "ä¼ä¸šæ³•äºº",
        stock_percent: "6.80%",
        should_capi: "515.77ä¸‡",
        subscribed_capital: "515.77",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "2028-03-18",
        tags_list: [],
        final_benefit_percent: "6.80%",
        related_product: { name: "ç‡§åŸç§‘æŠ€", round: "Pre-Aè½®", financing_count: "7" }
      },
      {
        stock_name: "å…¶ä»–è‚¡ä¸œï¼ˆåˆè®¡ï¼‰",
        stock_type: "æ··åˆ",
        stock_percent: "52.10%",
        should_capi: "3951.69ä¸‡",
        subscribed_capital: "3951.69",
        subscribed_capital_unit: "ä¸‡",
        subscribed_capital_ccy: "CNY",
        shoud_date: "",
        tags_list: [],
        final_benefit_percent: ""
      }
    ],

    // ===== ä¸»è¦äººå‘˜ =====
    employees: [
      { name: "èµµç«‹ä¸œ", job: "è‘£äº‹é•¿å…¼æ€»ç»ç†" },
      { name: "å¼ äºšæ—", job: "è‘£äº‹" },
      { name: "æ¨å…‰", job: "è‘£äº‹" },
      { name: "ç‹ä½³", job: "ç›‘äº‹" },
      { name: "æ—å‡¯", job: "é¦–å¸­æŠ€æœ¯å®˜CTO" }
    ],

    // ===== èèµ„ä¿¡æ¯ï¼ˆAPI 950ï¼‰â€” çœŸå®å…¬å¼€èèµ„è®°å½• =====
    financing: [
      {
        date: "2018-08-01",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "Pre-Aè½®",
        amount: "3.4äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "è…¾è®¯æŠ•èµ„ã€çº¢ç‚¹åˆ›æŠ•",
        news_url: ""
      },
      {
        date: "2019-06-20",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "Aè½®",
        amount: "æ•°äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "æ­¦å²³å³°èµ„æœ¬ã€è…¾è®¯æŠ•èµ„ã€çº¢ç‚¹åˆ›æŠ•",
        news_url: ""
      },
      {
        date: "2020-05-15",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "Bè½®",
        amount: "7äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "è…¾è®¯æŠ•èµ„ã€æ­¦å²³å³°èµ„æœ¬ã€çº¢ç‚¹åˆ›æŠ•",
        news_url: ""
      },
      {
        date: "2021-01-12",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "Cè½®",
        amount: "18äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "ä¸­ä¿¡äº§ä¸šåŸºé‡‘ã€ä¸­é‡‘èµ„æœ¬ã€æ­¦å²³å³°èµ„æœ¬ã€è…¾è®¯æŠ•èµ„",
        news_url: ""
      },
      {
        date: "2022-03-28",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "C+è½®",
        amount: "æ•°äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "ä¸´æ¸¯æ–°ç‰‡åŒºåŸºé‡‘ã€ä¸œæ–¹å¯Œæµ·",
        news_url: ""
      },
      {
        date: "2023-09-05",
        product_name: "ç‡§åŸç§‘æŠ€",
        round: "Dè½®",
        amount: "20äº¿äººæ°‘å¸",
        valuation: "æœªæŠ«éœ²",
        investment: "ä¸­ä¿¡äº§ä¸šåŸºé‡‘ã€å›½ç››é›†å›¢ã€ä¸´æ¸¯é›†å›¢ã€æ­¦å²³å³°èµ„æœ¬",
        news_url: ""
      }
    ],

    // ===== ä¸“åˆ©ä¿¡æ¯ï¼ˆAPI 514ï¼‰=====
    patents: [
      {
        title: "ä¸€ç§åŸºäºAIè®­ç»ƒçš„å¼ é‡å¤„ç†å™¨æ¶æ„åŠå…¶æ•°æ®æµä¼˜åŒ–æ–¹æ³•",
        application_number: "CN201910345678.X",
        application_date: "2019-04-22",
        publication_number: "CN110069284A",
        publication_date: "2019-07-30",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "æˆæƒ",
        ipc_list: ["G06F"],
        ipc_desc: ["è®¡ç®—ï¼›æ¨ç®—ï¼›è®¡æ•°"],
        inventor_list: ["èµµç«‹ä¸œ", "æ—å‡¯"],
        assignee_list: ["ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "ä¸€ç§å¤§è§„æ¨¡å¹¶è¡Œè®¡ç®—åŠ é€ŸèŠ¯ç‰‡çš„å†…å­˜ç®¡ç†æ–¹æ³•",
        application_number: "CN202010678901.5",
        application_date: "2020-07-15",
        publication_number: "CN111857831A",
        publication_date: "2020-10-30",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "æˆæƒ",
        ipc_list: ["G06F"],
        ipc_desc: ["è®¡ç®—ï¼›æ¨ç®—ï¼›è®¡æ•°"],
        inventor_list: ["æ—å‡¯"],
        assignee_list: ["ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "ä¸€ç§ç”¨äºæ·±åº¦å­¦ä¹ è®­ç»ƒçš„æ··åˆç²¾åº¦è®¡ç®—æ–¹æ³•åŠè£…ç½®",
        application_number: "CN202110567890.2",
        application_date: "2021-05-24",
        publication_number: "CN113127015A",
        publication_date: "2021-07-16",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "æˆæƒ",
        ipc_list: ["G06N"],
        ipc_desc: ["åŸºäºç‰¹å®šè®¡ç®—æ¨¡å‹çš„è®¡ç®—æœºç³»ç»Ÿ"],
        inventor_list: ["èµµç«‹ä¸œ", "æ¨å·¥"],
        assignee_list: ["ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "ä¸€ç§GPUé›†ç¾¤é€šä¿¡äº’è”æ‹“æ‰‘ä¼˜åŒ–æ–¹æ³•",
        application_number: "CN202210345678.9",
        application_date: "2022-04-05",
        publication_number: "CN114866429A",
        publication_date: "2022-08-05",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "å®è´¨å®¡æŸ¥",
        ipc_list: ["H04L"],
        ipc_desc: ["æ•°å­—ä¿¡æ¯çš„ä¼ è¾“"],
        inventor_list: ["æ—å‡¯", "å¼ å·¥"],
        assignee_list: ["ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸"]
      },
      {
        title: "é¢å‘å¤§è¯­è¨€æ¨¡å‹æ¨ç†çš„èŠ¯ç‰‡è°ƒåº¦ä¼˜åŒ–ç³»ç»Ÿ",
        application_number: "CN202311234567.0",
        application_date: "2023-10-12",
        publication_number: "CN117369923A",
        publication_date: "2024-01-09",
        kind_code_desc: "å‘æ˜å…¬å¸ƒ",
        legal_status_desc: "å®è´¨å®¡æŸ¥",
        ipc_list: ["G06F", "G06N"],
        ipc_desc: ["è®¡ç®—ï¼›æ¨ç®—ï¼›è®¡æ•°", "åŸºäºç‰¹å®šè®¡ç®—æ¨¡å‹çš„è®¡ç®—æœºç³»ç»Ÿ"],
        inventor_list: ["èµµç«‹ä¸œ"],
        assignee_list: ["ä¸Šæµ·ç‡§åŸç§‘æŠ€æœ‰é™å…¬å¸"]
      }
    ],

    // ===== è½¯ä»¶è‘—ä½œæƒ =====
    copyrights: [
      {
        name: "ç‡§åŸGCUé›†ç¾¤ç®¡ç†å¹³å°V2.0",
        category: "åº”ç”¨è½¯ä»¶",
        reg_number: "2021SR0987654",
        reg_date: "2021-08-20",
        first_publish_date: "2021-06-01"
      },
      {
        name: "ç‡§åŸé©±åŠ¨ç¨‹åºåŠè¿è¡Œæ—¶ç¯å¢ƒTopsRuntime V1.5",
        category: "ç³»ç»Ÿè½¯ä»¶",
        reg_number: "2022SR0123456",
        reg_date: "2022-03-10",
        first_publish_date: "2022-01-15"
      }
    ],

    // ===== é£é™©ä¿¡æ¯ =====
    risk_info: "æ— é£é™©è®°å½•",

    // ===== è”ç³»ä¿¡æ¯ =====
    contact_info: {
      phone_number: "021-6876XXXX",
      email: "hr@enflame-tech.com",
      website: [{ name: "ç‡§åŸç§‘æŠ€", url: "https://www.enflame-tech.com" }]
    },

    // ===== å˜æ›´è®°å½• =====
    change_records: [
      {
        project_name: "æ³¨å†Œèµ„æœ¬å˜æ›´ï¼ˆæ³¨å†Œèµ„é‡‘ã€èµ„é‡‘æ•°é¢ç­‰å˜æ›´ï¼‰",
        before_content: "6850.0000ä¸‡äººæ°‘å¸",
        after_content: "7584.8215ä¸‡äººæ°‘å¸",
        change_date: "2023-09-10"
      },
      {
        project_name: "ç»è¥èŒƒå›´å˜æ›´",
        before_content: "ä»äº‹é›†æˆç”µè·¯é¢†åŸŸçš„æŠ€æœ¯å¼€å‘...",
        after_content: "æ–°å¢ï¼šAIè®­ç»ƒèŠ¯ç‰‡åŠæ¨ç†èŠ¯ç‰‡è®¾è®¡ï¼›GPUèŠ¯ç‰‡æ¶æ„è®¾è®¡...",
        change_date: "2022-05-18"
      }
    ],

    // ===== å¹´æŠ¥ç¤¾ä¿ =====
    headcount_history: { "2020": 220, "2021": 385, "2022": 510, "2023": 620, "2024": 652 }
  }
};

// Mock æ”¿ç­–æ•°æ®ï¼ˆæ¨¡æ‹Ÿæœç´¢ç»“æœï¼‰
const MOCK_POLICIES = [
  {
    policy_title: "æµ¦ä¸œæ–°åŒºä¿ƒè¿›é›†æˆç”µè·¯å’Œæ–°ä¸€ä»£é€šä¿¡äº§ä¸šé«˜è´¨é‡å‘å±•ä¸“é¡¹æ“ä½œç»†åˆ™",
    source: "æµ¦ä¸œæ–°åŒºæ”¿åºœ",
    url: "https://www.pudong.gov.cn/zwgk/gfxwj-kjwzcwj/2024/299/333469.html",
    pdf_url: "https://www.pudong.gov.cn/zwgk/gfxwj-kjwzcwj/2024/299/333469/a9967b3e5807430eabc4808077f07d69.pdf",
    summary: "å¯¹å…‰é€šä¿¡ã€é›†æˆç”µè·¯ç­‰æ–°ä¸€ä»£ä¿¡æ¯é€šä¿¡é¢†åŸŸçš„ä¼ä¸šï¼Œç»™äºˆç ”å‘æŠ•å…¥è¡¥è´´ã€äº§ä¸šåŒ–é¡¹ç›®èµ„åŠ©ç­‰æ”¯æŒï¼Œå•ä¸ªé¡¹ç›®æœ€é«˜èµ„åŠ©500ä¸‡å…ƒã€‚",
    publish_date: "2024-06-15",
    applicable: "å…‰é€šä¿¡è®¾å¤‡åˆ¶é€ ä¼ä¸š"
  },
  {
    policy_title: "ä¸Šæµ·å¸‚å°å¾®ä¼ä¸šåˆ›ä¸šæ‹…ä¿è´·æ¬¾è´´æ¯åŠå¥–è¡¥å®æ–½åŠæ³•",
    source: "ä¸Šæµ·å¸‚äººåŠ›èµ„æºå’Œç¤¾ä¼šä¿éšœå±€",
    url: "https://rsj.sh.gov.cn/txwjgzdt_17408/20240301/001.html",
    pdf_url: "",
    summary: "ç¬¦åˆæ¡ä»¶çš„å°å¾®ä¼ä¸šå¯ç”³è¯·æœ€é«˜400ä¸‡å…ƒçš„åˆ›ä¸šæ‹…ä¿è´·æ¬¾ï¼Œæ”¿åºœç»™äºˆå…¨é¢è´´æ¯ã€‚é€‚ç”¨äºæˆç«‹5å¹´å†…çš„å°å¾®ä¼ä¸šã€‚",
    publish_date: "2024-03-01",
    applicable: "å°å¾®ä¼ä¸š"
  },
  {
    policy_title: "æµ¦ä¸œæ–°åŒºå…³äºä¿ƒè¿›ç§‘æŠ€åˆ›æ–°ä¸­å¿ƒæ ¸å¿ƒåŠŸèƒ½åŒºå»ºè®¾çš„è‹¥å¹²æ”¿ç­–æªæ–½",
    source: "æµ¦ä¸œæ–°åŒºç§‘ç»å§”",
    url: "https://www.pudong.gov.cn/zwgk/gfxwj-kjwzcwj/2024/156/322890.html",
    pdf_url: "",
    summary: "å¯¹é¦–æ¬¡è®¤å®šçš„é«˜æ–°æŠ€æœ¯ä¼ä¸šç»™äºˆä¸€æ¬¡æ€§20ä¸‡å…ƒå¥–åŠ±ï¼›å¯¹ç§‘æŠ€å‹ä¸­å°ä¼ä¸šç ”å‘è´¹ç”¨åŠ è®¡æ‰£é™¤ç»™äºˆé¢å¤–è¡¥è´´ã€‚",
    publish_date: "2024-04-20",
    applicable: "ç§‘æŠ€å‹ä¸­å°ä¼ä¸šã€é«˜æ–°æŠ€æœ¯ä¼ä¸š"
  },
  {
    policy_title: "ä¸Šæµ·å¸‚æˆ˜ç•¥æ€§æ–°å…´äº§ä¸šå’Œå…ˆå¯¼äº§ä¸šå‘å±•ä¸“é¡¹èµ„é‡‘ç®¡ç†åŠæ³•",
    source: "ä¸Šæµ·å¸‚ç»ä¿¡å§”",
    url: "https://jjxxw.sh.gov.cn/flfg/20240510/001.html",
    pdf_url: "",
    summary: "æ”¯æŒæ–°ä¸€ä»£ä¿¡æ¯æŠ€æœ¯ï¼ˆå«å…‰é€šä¿¡ï¼‰äº§ä¸šå‘å±•ã€‚å¯¹ç¬¦åˆæ¡ä»¶çš„é¡¹ç›®ç»™äºˆä¸è¶…è¿‡é¡¹ç›®æ€»æŠ•èµ„30%çš„èµ„åŠ©ï¼Œå•ä¸ªé¡¹ç›®æœ€é«˜3000ä¸‡å…ƒã€‚",
    publish_date: "2024-05-10",
    applicable: "æ–°ä¸€ä»£ä¿¡æ¯æŠ€æœ¯ä¼ä¸š"
  },
  {
    policy_title: "æµ¦ä¸œæ–°åŒºä¸­å°å¾®ä¼ä¸šæ”¿ç­–æ€§èèµ„æ‹…ä¿åŸºé‡‘ç®¡ç†åŠæ³•",
    source: "æµ¦ä¸œæ–°åŒºé‡‘èå·¥ä½œå±€",
    url: "https://www.pudong.gov.cn/zwgk/gfxwj-zczjwj/2024/098/319560.html",
    pdf_url: "",
    summary: "ä¸ºæµ¦ä¸œæ–°åŒºæ³¨å†Œçš„ä¸­å°å¾®ä¼ä¸šæä¾›æœ€é«˜1000ä¸‡å…ƒçš„èèµ„æ‹…ä¿æ”¯æŒï¼Œæ‹…ä¿è´¹ç‡ä¸è¶…è¿‡1%ã€‚",
    publish_date: "2024-02-28",
    applicable: "æµ¦ä¸œæ–°åŒºä¸­å°å¾®ä¼ä¸š"
  }
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// çŠ¶æ€ç®¡ç†
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentCompany = null;
let lastPolicies = [];  // ä¿å­˜æœç´¢ç»“æœä¾›æ±‡æ€»é¡µç”¨

function setStep(n) {
  for (let i = 1; i <= 5; i++) {
    const dot = document.getElementById('dot' + i);
    dot.classList.remove('active', 'done');
    if (i < n) dot.classList.add('done');
    else if (i === n) dot.classList.add('active');
  }
  document.getElementById('line1').classList.toggle('done', n > 1);
  document.getElementById('line2').classList.toggle('done', n > 2);
  document.getElementById('line3').classList.toggle('done', n > 3);
  document.getElementById('line4').classList.toggle('done', n > 4);

  document.getElementById('step1').classList.toggle('hidden', n !== 1);
  document.getElementById('step2').classList.toggle('hidden', n !== 2);
  document.getElementById('step3').classList.toggle('hidden', n !== 3);
  document.getElementById('step4').classList.toggle('hidden', n !== 4);
  document.getElementById('step5').classList.toggle('hidden', n !== 5);
}

function goToSummary() {
  setStep(4);
  renderSummary(lastPolicies);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ç¬¬ä¸€æ­¥ï¼šæŸ¥è¯¢å…¬å¸
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectCompany(btn, name) {
  // æ¸…é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
  btn.parentElement.querySelectorAll('.btn').forEach(b => {
    b.style.background = '';
    b.style.borderColor = '';
    b.style.color = '';
  });
  // é«˜äº®é€‰ä¸­
  btn.style.background = '#e8f0fe';
  btn.style.borderColor = '#1a73e8';
  btn.style.color = '#1a73e8';
  // è®¾ç½®å€¼å¹¶å¯ç”¨æŸ¥è¯¢æŒ‰é’®
  document.getElementById('companyInput').value = name;
  const queryBtn = document.getElementById('queryBtn');
  queryBtn.disabled = false;
  queryBtn.style.opacity = '1';
}

function queryCompany() {
  const name = document.getElementById('companyInput').value.trim();
  if (!name) { alert('è¯·å…ˆé€‰æ‹©ä¸€å®¶å…¬å¸'); return; }

  // ç²¾ç¡®åŒ¹é… â†’ æ¨¡ç³ŠåŒ¹é…
  let data = MOCK_COMPANIES[name];
  if (!data) {
    const key = Object.keys(MOCK_COMPANIES).find(k => k.includes(name) || name.includes(k));
    if (key) data = MOCK_COMPANIES[key];
  }
  if (!data) {
    alert('æœªæ‰¾åˆ°è¯¥å…¬å¸ä¿¡æ¯ï¼ˆå½“å‰ä¸ºæ¼”ç¤ºæ•°æ®ï¼‰');
    return;
  }

  currentCompany = data;
  renderCompanyInfo(data);
  setStep(2);
}

function renderCompanyInfo(data) {
  // â”€â”€ åŸºæœ¬å·¥å•†ä¿¡æ¯ â”€â”€
  const fields = [
    ['å…¬å¸åç§°', data.company_name],
    ['è‹±æ–‡å', data.english_name],
    ['æ³•å®šä»£è¡¨äºº', data.legal_person],
    ['æ³¨å†Œèµ„æœ¬', data.registered_capital],
    ['æˆç«‹æ—¥æœŸ', data.established_date],
    ['ç»è¥çŠ¶æ€', data.status],
    ['ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ', data.social_credit_code],
    ['æ³¨å†Œåœ°å€', data.registered_address],
    ['æ‰€å±è¡Œä¸š', data.industry],
    ['ä¼ä¸šç±»å‹', data.company_type],
    ['ä¼ä¸šè§„æ¨¡', `${data.scale}ï¼ˆ${data.person_scope || '-'}ï¼‰`],
    ['å‚ä¿äººæ•°', data.insured_count ? `${data.insured_count}äºº` : '-'],
    ['ç»è¥èŒƒå›´', data.business_scope],
  ];

  let html = fields.map(([label, value]) =>
    `<div class="info-row">
      <div class="info-label">${label}</div>
      <div class="info-value">${value || '-'}</div>
    </div>`
  ).join('');

  // â”€â”€ ä¼ä¸šæ ‡ç­¾ â”€â”€
  if (data.tag_list && data.tag_list.length) {
    const tagHtml = data.tag_list.map(t => `<span style="background:#e8f0fe;color:#1a56db;padding:2px 8px;border-radius:10px;font-size:12px;margin-right:4px">${t.name}</span>`).join('');
    html += `<div class="info-row"><div class="info-label">ä¼ä¸šç”»åƒ</div><div class="info-value">${tagHtml}</div></div>`;
  }

  // â”€â”€ è‚¡ä¸œä¿¡æ¯ â”€â”€
  if (data.shareholders && data.shareholders.length) {
    const shHtml = data.shareholders.map(sh => {
      const tags = (sh.tags_list || []).map(t => `<span style="background:#fef3c7;color:#92400e;padding:1px 5px;border-radius:6px;font-size:11px;margin-left:4px">${t}</span>`).join('');
      const prod = sh.related_product ? ` â†’ ${sh.related_product.round}æŠ•èµ„æ–¹` : '';
      return `<div style="margin-bottom:4px">â€¢ <b>${sh.stock_name}</b>ï¼ˆ${sh.stock_type}ï¼‰æŒè‚¡ ${sh.stock_percent}ï¼Œè®¤ç¼´ ${sh.should_capi}${prod}${tags}</div>`;
    }).join('');
    html += `<div class="info-row"><div class="info-label">è‚¡ä¸œä¿¡æ¯</div><div class="info-value">${shHtml}</div></div>`;
  }

  // â”€â”€ ä¸»è¦äººå‘˜ â”€â”€
  if (data.employees && data.employees.length) {
    const empHtml = data.employees.map(e => `${e.name}ï¼ˆ${e.job}ï¼‰`).join('ã€');
    html += `<div class="info-row"><div class="info-label">ä¸»è¦äººå‘˜</div><div class="info-value">${empHtml}</div></div>`;
  }

  // â”€â”€ èèµ„å†ç¨‹ â”€â”€
  if (data.financing && data.financing.length) {
    const finHtml = data.financing.map(f =>
      `<div style="margin-bottom:4px">â€¢ <b>${f.date}</b> ${f.round} â€” ${f.amount}ï¼ˆæŠ•èµ„æ–¹ï¼š${f.investment}ï¼‰</div>`
    ).join('');
    html += `<div class="info-row"><div class="info-label">èèµ„å†ç¨‹</div><div class="info-value">${finHtml}</div></div>`;
  }

  // â”€â”€ ä¸“åˆ©ä¿¡æ¯ â”€â”€
  if (data.patents && data.patents.length) {
    const patHtml = data.patents.map(p =>
      `<div style="margin-bottom:4px">â€¢ <b>${p.title}</b><br><span style="color:#888;font-size:12px">${p.application_number} | ${p.kind_code_desc} | ${p.legal_status_desc} | ${p.application_date}</span></div>`
    ).join('');
    html += `<div class="info-row"><div class="info-label">ä¸“åˆ©ï¼ˆ${data.patents.length}é¡¹ï¼‰</div><div class="info-value">${patHtml}</div></div>`;
  }

  // â”€â”€ è½¯è‘— â”€â”€
  if (data.copyrights && data.copyrights.length) {
    const cpHtml = data.copyrights.map(c => `â€¢ ${c.name}ï¼ˆ${c.reg_number}ï¼Œ${c.reg_date}ï¼‰`).join('<br>');
    html += `<div class="info-row"><div class="info-label">è½¯ä»¶è‘—ä½œæƒ</div><div class="info-value">${cpHtml}</div></div>`;
  }

  // â”€â”€ å‚ä¿äººæ•°å†å² â”€â”€
  if (data.headcount_history && Object.keys(data.headcount_history).length) {
    const hcHtml = Object.entries(data.headcount_history).sort().map(([y,c]) => `${y}å¹´:${c}äºº`).join(' â†’ ');
    html += `<div class="info-row"><div class="info-label">äººå‘˜è§„æ¨¡è¶‹åŠ¿</div><div class="info-value">${hcHtml}</div></div>`;
  }

  // â”€â”€ é£é™©ä¿¡æ¯ â”€â”€
  html += `<div class="info-row"><div class="info-label">é£é™©ä¿¡æ¯</div><div class="info-value" style="color:${data.risk_info === 'æ— é£é™©è®°å½•' ? '#16a34a' : '#dc2626'}">${data.risk_info || '-'}</div></div>`;

  document.getElementById('companyInfo').innerHTML = html;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ç¬¬äºŒæ­¥â†’ç¬¬ä¸‰æ­¥ï¼šæœç´¢æ”¿ç­–
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startPolicySearch() {
  setStep(3);
  document.getElementById('searchingCard').classList.remove('hidden');
  document.getElementById('resultCard').classList.add('hidden');
  document.getElementById('resultActions').classList.add('hidden');

  const log = document.getElementById('searchLog');
  const status = document.getElementById('searchStatus');
  log.innerHTML = '';

  function ts() { return new Date().toLocaleTimeString('zh-CN', {hour12:false}); }
  function addLog(msg) {
    log.innerHTML += `<span style="color:#aaa">[${ts()}]</span> ${msg}\n`;
    log.scrollTop = log.scrollHeight;
  }

  addLog('ğŸ§  AI æ™ºèƒ½æœç´¢å¯åŠ¨ä¸­...');
  status.textContent = 'AI æ­£åœ¨åˆ†æä¼ä¸šä¿¡æ¯...';

  // é‡ç½®æ€è€ƒé¢æ¿
  resetThinkingPanel();

  // æ„å»ºæŸ¥è¯¢å‚æ•° â€” ä¼ é€’ä¼ä¸šå®Œæ•´ä¿¡æ¯
  const params = new URLSearchParams({
    company_name: currentCompany.company_name || '',
    industry: currentCompany.industry || 'å…‰é€šä¿¡',
    region: 'ä¸Šæµ·',
    district: currentCompany.district || '',
    tags: (currentCompany.tags || []).join(','),
    registered_capital: currentCompany.registered_capital || '',
    employees: currentCompany.scale || '',
    founded: currentCompany.established_date || '',
    address: currentCompany.registered_address || '',
    business_scope: currentCompany.business_scope || '',
    risk_info: currentCompany.risk_info || '',
  });

  // SSE è¿æ¥çœŸå® API
  const es = new EventSource(`/api/policy-search/stream?${params}`);

  es.onmessage = function(event) {
    let data;
    try { data = JSON.parse(event.data); } catch(e) { return; }

    if (data.type === 'log') {
      addLog(data.message);
      // è§£ææ—¥å¿—åˆ°æ€è€ƒé¢æ¿
      parseThinkingLog(data.message);
      // åªæŠŠå…³é”®æ­¥éª¤æ˜¾ç¤ºåœ¨çŠ¶æ€æ ï¼Œå¿½ç•¥è­¦å‘Šç±»æ—¥å¿—
      const msg = data.message;
      if (!msg.includes('timeout') && !msg.includes('WARNING') && !msg.includes('readiness')) {
        const short = msg.length > 60 ? msg.substring(0, 60) + '...' : msg;
        status.textContent = short;
      }
    }
    else if (data.type === 'status') {
      addLog(`ğŸ“¡ ${data.message}`);
      status.textContent = data.message;
    }
    else if (data.type === 'result') {
      const result = data.data;
      addLog(`âœ… æœç´¢å®Œæˆ! è€—æ—¶ ${result.duration}sï¼ŒWorker: ${result.worker || 'unknown'}ï¼Œæ‰¾åˆ° ${result.policy_count || 0} æ¡æ”¿ç­–`);

      // ç»Ÿä¸€æ ¼å¼: WorkerResult.policies
      let policies = result.policies || [];

      // å…¼å®¹æ—§æ ¼å¼
      if (!policies.length && result.structured && result.structured.policies) {
        policies = result.structured.policies;
      } else if (!policies.length && result.result && typeof result.result === 'object' && result.result.policies) {
        policies = result.result.policies;
      }

      if (result.search_notes) {
        addLog(`ğŸ“ ${result.search_notes}`);
      } else if (result.structured && result.structured.search_notes) {
        addLog(`ğŸ“ ${result.structured.search_notes}`);
      }

      document.getElementById('searchingCard').classList.add('hidden');
      document.getElementById('resultCard').classList.remove('hidden');
      document.getElementById('resultActions').classList.remove('hidden');
      lastPolicies = policies;
      renderPolicies(policies);
    }
    else if (data.type === 'done') {
      es.close();
    }
    else if (data.type === 'error') {
      addLog(`âŒ é”™è¯¯: ${data.message}`);
      status.textContent = 'æœç´¢å‡ºé”™';
      document.getElementById('searchingCard').classList.add('hidden');
      document.getElementById('resultActions').classList.remove('hidden');
      es.close();
    }
    // heartbeat â€” ignore
  };

  es.onerror = function() {
    addLog('âŒ è¿æ¥æ–­å¼€ï¼Œæœç´¢å¯èƒ½ä»åœ¨è¿è¡Œ...');
    status.textContent = 'è¿æ¥æ–­å¼€';
    es.close();
  };
}

function renderPolicies(policies) {
  document.getElementById('resultCount').textContent = `å…± ${policies.length} æ¡`;

  if (!policies.length) {
    document.getElementById('policyList').innerHTML = '<div class="empty">æš‚æœªæ‰¾åˆ°ç›¸å…³æ”¿ç­–</div>';
    return;
  }

  const html = policies.map((p, i) => {
    const source = p.source || 'æœªçŸ¥æ¥æº';
    const sourceTag = source.includes('åŒº') || source.includes('gov') ? 'tag-gov' :
                      source.includes('å¾®ä¿¡') ? 'tag-wechat' : 'tag-other';
    const applicable = p.industry || p.applicable_industry || p.applicable || '';
    const keySupport = p.support || p.key_support || '';
    const title = p.title || p.policy_title || 'æœªå‘½åæ”¿ç­–';
    const date = p.date || p.publish_date || '';
    const urlDisplay = p.url
      ? `<a href="${p.url}" target="_blank">${p.url}</a>`
      : '<span class="no-link">æœªæ‰¾åˆ°</span>';
    const pdfDisplay = p.pdf_url
      ? `<a href="${p.pdf_url}" target="_blank">${p.pdf_url}</a>`
      : '<span class="no-link">æœªæ‰¾åˆ°</span>';

    return `
    <div class="policy-item">
      <div class="policy-title">${i + 1}. ${title}</div>
      <div class="policy-meta">
        <span class="tag ${sourceTag}">${source}</span>
        ${date ? 'ğŸ“… ' + date : ''}
        ${applicable ? ' Â· é€‚ç”¨: ' + applicable : ''}
      </div>
      <div class="policy-summary">${p.summary || 'æš‚æ— æ‘˜è¦'}</div>
      ${keySupport ? `<div class="support-block">ğŸ’° ${keySupport}</div>` : ''}
      <div class="link-block">
        <div class="link-row">
          <span class="link-label">ğŸ“„ åŸæ–‡é“¾æ¥</span>
          ${urlDisplay}
        </div>
        <div class="link-row">
          <span class="link-label">ğŸ“¥ PDFä¸‹è½½</span>
          ${pdfDisplay}
        </div>
      </div>
    </div>`;
  }).join('');

  document.getElementById('policyList').innerHTML = html;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// æ±‡æ€»è¡¨æ ¼ï¼ˆæŒ‰å±‚åˆ†ç»„ + æ’åï¼‰
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSummary(policies) {
  const layers = ['åŸºç¡€å±‚', 'å‘å±•å±‚', 'äººæ‰å±‚', 'è£èª‰å±‚'];
  const grouped = {};
  layers.forEach(l => grouped[l] = []);
  const ungrouped = [];

  policies.forEach((p, i) => {
    const layer = p.layer || '';
    const item = { ...p, _rank: i + 1 };
    if (grouped[layer]) grouped[layer].push(item);
    else ungrouped.push(item);
  });

  let html = '';

  layers.forEach(layer => {
    const items = grouped[layer];
    if (!items.length) return;

    html += `<div style="margin-bottom:16px;">
      <div style="margin-bottom:6px;">
        <span class="layer-badge layer-${layer}">${layer}</span>
        <span style="font-size:12px; color:#999; margin-left:6px;">${items.length} æ¡æ”¿ç­–</span>
      </div>
      <table class="summary-table">
        <tr>
          <th style="width:30px;">#</th>
          <th>æ”¿ç­–åç§°</th>
          <th style="width:45px;">ç»¼åˆ</th>
          <th style="width:35px;">ğŸ’°</th>
          <th style="width:35px;">ğŸ¯</th>
          <th style="width:35px;">âœ…</th>
          <th style="width:35px;">â°</th>
          <th style="width:70px;">é‡‘é¢</th>
        </tr>`;

    items.forEach((p, j) => {
      const score = p.relevance || 0;
      const scoreClass = score >= 70 ? 'score-high' : score >= 50 ? 'score-mid' : 'score-low';
      const title = p.title || p.policy_title || 'æœªå‘½å';
      const shortTitle = title.length > 18 ? title.substring(0, 18) + '...' : title;
      const amount = p.amount || 'â€”';
      const lvl = p.amount_level || '';
      const sa = p.score_amount || 0;
      const se = p.score_exclusivity || 0;
      const sf = p.score_feasibility || 0;
      const su = p.score_urgency || 0;
      const ss = p.score_sustainability || 0;

      // å°ç»´åº¦è‰²å½©
      const dimColor = (v) => v >= 70 ? '#34a853' : v >= 50 ? '#f9a825' : v >= 30 ? '#e37400' : '#ea4335';

      html += `<tr>
        <td style="color:#999; font-size:12px;">${j + 1}</td>
        <td>
          ${p.url ? `<a href="${p.url}" target="_blank" style="color:#333; text-decoration:none; font-size:12px;" title="${title}">${shortTitle}</a>` : `<span style="font-size:12px;" title="${title}">${shortTitle}</span>`}
          ${lvl ? `<span style="font-size:10px;padding:1px 4px;border-radius:3px;background:${lvl==='S'?'#fce8e8':lvl==='A'?'#fef3e0':lvl==='B'?'#e8f0fe':'#f0f0f0'};color:${lvl==='S'?'#c62828':lvl==='A'?'#e37400':lvl==='B'?'#1a73e8':'#999'};margin-left:4px;">${lvl}</span>` : ''}
        </td>
        <td>
          <div style="display:flex; align-items:center; gap:3px;">
            <span style="font-size:13px; font-weight:700; color:${score >= 70 ? '#34a853' : score >= 50 ? '#f9a825' : '#ea4335'};">${score}</span>
          </div>
        </td>
        <td style="font-size:11px; font-weight:600; color:${dimColor(sa)};">${sa}</td>
        <td style="font-size:11px; font-weight:600; color:${dimColor(se)};">${se}</td>
        <td style="font-size:11px; font-weight:600; color:${dimColor(sf)};">${sf}</td>
        <td style="font-size:11px; font-weight:600; color:${dimColor(su)};">${su}</td>
        <td style="font-size:11px; color:#1a73e8; font-weight:500;">${amount}</td>
      </tr>`;
    });

    html += '</table></div>';
  });

  // æœªåˆ†ç±»
  if (ungrouped.length) {
    html += `<div style="margin-top:12px; font-size:12px; color:#999;">æœªåˆ†ç±»: ${ungrouped.length} æ¡</div>`;
  }

  if (!html) {
    html = '<div class="empty">æš‚æ— æ±‡æ€»æ•°æ®</div>';
  }

  document.getElementById('summaryContent').innerHTML = html;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// è¿”å›
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goBack() {
  setStep(1);
}

function toggleLog() {
  const log = document.getElementById('searchLog');
  const toggle = document.getElementById('logToggle');
  if (log.classList.contains('hidden')) {
    log.classList.remove('hidden');
    toggle.textContent = 'â–¼';
  } else {
    log.classList.add('hidden');
    toggle.textContent = 'â–¶';
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// AI æ€è€ƒè¿‡ç¨‹é¢æ¿
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let thinkingState = { searchTasks: [], searchProgress: [], round: 0 };

function resetThinkingPanel() {
  thinkingState = { searchTasks: [], searchProgress: [], round: 0 };
  for (let i = 0; i <= 4; i++) {
    const sec = document.getElementById('thinkSection' + i);
    sec.className = 'thinking-section';
    document.getElementById('thinkBadge' + i).textContent = 'ç­‰å¾…ä¸­';
    document.getElementById('thinkBadge' + i).className = 'badge';
    document.getElementById('thinkBody' + i).innerHTML = '';
  }
}

function activateSection(n, badgeText) {
  const sec = document.getElementById('thinkSection' + n);
  sec.className = 'thinking-section active';
  const badge = document.getElementById('thinkBadge' + n);
  badge.textContent = badgeText || 'è¿›è¡Œä¸­...';
  badge.className = 'badge';
}

function completeSection(n, badgeText) {
  const sec = document.getElementById('thinkSection' + n);
  sec.className = 'thinking-section done';
  const badge = document.getElementById('thinkBadge' + n);
  badge.textContent = badgeText || 'å®Œæˆ';
  badge.className = 'badge done';
}

function addThinkingItem(sectionId, html) {
  const body = document.getElementById('thinkBody' + sectionId);
  body.innerHTML += html;
}

function parseThinkingLog(msg) {
  // â”€â”€ Section 0: ä¼ä¸šä¿¡æ¯è¡¥å…¨ â”€â”€
  if (msg.includes('Step 0: ä¼ä¸šä¿¡æ¯è¡¥å…¨')) {
    activateSection(0, 'æœç´¢ä¸­...');
  }
  if (msg.includes('æœç´¢ä¼ä¸šä¿¡æ¯:')) {
    const text = msg.replace(/.*æœç´¢ä¼ä¸šä¿¡æ¯:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ”</span><span class="text">${text.substring(0, 50)}</span></div>`);
  }
  if (msg.includes('ğŸ“ è¡¥å……å®é™…åœ°å€:')) {
    const text = msg.replace(/.*ğŸ“ è¡¥å……å®é™…åœ°å€:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ“</span><span class="text"><b>å®é™…åœ°å€</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ”¬ æ ¸å¿ƒäº§å“:')) {
    const text = msg.replace(/.*ğŸ”¬ æ ¸å¿ƒäº§å“:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ”¬</span><span class="text"><b>æ ¸å¿ƒäº§å“</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ… å·²è·èµ„è´¨:')) {
    const text = msg.replace(/.*ğŸ… å·²è·èµ„è´¨:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ…</span><span class="text"><b>å·²è·èµ„è´¨</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ‘¤ åˆ›å§‹äºº:')) {
    const text = msg.replace(/.*ğŸ‘¤ åˆ›å§‹äºº:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ‘¤</span><span class="text"><b>åˆ›å§‹äºº</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ’° èèµ„:')) {
    const text = msg.replace(/.*ğŸ’° èèµ„:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ’°</span><span class="text"><b>èèµ„</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ’¡ å‘ç°:')) {
    const text = msg.replace(/.*ğŸ’¡ å‘ç°:\s*/, '');
    addThinkingItem(0, `<div class="thinking-item"><span class="bullet">ğŸ’¡</span><span class="text"><b>å‘ç°</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ä¼ä¸šä¿¡æ¯è¡¥å…¨å®Œæˆ')) {
    completeSection(0, 'âœ“ å®Œæˆ');
  }
  if (msg.includes('æœªè·å–åˆ°ä¼ä¸šè¡¥å……ä¿¡æ¯')) {
    completeSection(0, 'âš ï¸ æ— è¡¥å……');
  }

  // â”€â”€ Section 1: ä¼ä¸šç‰¹å¾åˆ†æ â”€â”€
  if (msg.includes('AI æ­£åœ¨åˆ†æä¼ä¸šä¿¡æ¯')) {
    activateSection(1, 'åˆ†æä¸­...');
  }
  // ç‰¹å¾é€†å‘å·¥ç¨‹
  if (msg.includes('ğŸ“ spatial:')) {
    const text = msg.replace(/.*ğŸ“ spatial:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ“</span><span class="text"><b>ç©ºé—´è½½ä½“</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ­ industry_chain:')) {
    const text = msg.replace(/.*ğŸ­ industry_chain:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ­</span><span class="text"><b>äº§ä¸šé“¾</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ·ï¸ identity:') || msg.includes('ğŸ· identity:')) {
    const text = msg.replace(/.*ğŸ·.? identity:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ·ï¸</span><span class="text"><b>èº«ä»½å±æ€§</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ‘¥ hr_dynamics:')) {
    const text = msg.replace(/.*ğŸ‘¥ hr_dynamics:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ‘¥</span><span class="text"><b>äººåŠ›èµ„æº</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('âš–ï¸ compliance:') || msg.includes('âš– compliance:')) {
    const text = msg.replace(/.*âš–.? compliance:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">âš–ï¸</span><span class="text"><b>åˆè§„çŠ¶æ€</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ“Š tax_financial:')) {
    const text = msg.replace(/.*ğŸ“Š tax_financial:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ“Š</span><span class="text"><b>ç¨æ”¶ä¸è´¢åŠ¡</b>ï¼š${text}</span></div>`);
  }
  if (msg.includes('ğŸ† talent_incentive:')) {
    const text = msg.replace(/.*ğŸ† talent_incentive:\s*/, '');
    addThinkingItem(1, `<div class="thinking-item"><span class="bullet">ğŸ†</span><span class="text"><b>äººæ‰æ¿€åŠ±</b>ï¼š${text}</span></div>`);
  }

  // â”€â”€ Section 2: æœç´¢ç­–ç•¥ â”€â”€
  if (msg.includes('ç”Ÿæˆ') && msg.includes('ä¸ªæœç´¢ä»»åŠ¡')) {
    completeSection(1, 'âœ“ å®Œæˆ');
    activateSection(2, 'ç”Ÿæˆç­–ç•¥');
    const m = msg.match(/(\d+)\s*ä¸ªæœç´¢ä»»åŠ¡/);
    if (m) addThinkingItem(2, `<div style="font-size:12px;color:#1a73e8;margin-bottom:6px;font-weight:600;">å…± ${m[1]} ä¸ªæœç´¢æ–¹å‘ï¼š</div>`);
  }
  // æœç´¢ä»»åŠ¡æ¡ç›®: "1. [ç©ºé—´è½½ä½“â†’åŸºç¡€å±‚] ğŸ”´ å¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒº ç®¡å§”ä¼š ä¸“é¡¹èµ„é‡‘"
  const taskMatch = msg.match(/^\s*(\d+)\.\s*\[(.+?)â†’(.+?)\]\s*(ğŸ”´|ğŸŸ¡|ğŸŸ¢|âšª)\s*(.+)/);
  if (taskMatch) {
    const [, num, dim, layer, priority, term] = taskMatch;
    const pColor = {'ğŸ”´':'#ea4335','ğŸŸ¡':'#fbbc04','ğŸŸ¢':'#34a853','âšª':'#999'}[priority] || '#999';
    const layerBg = {'åŸºç¡€å±‚':'#e8f0fe','å‘å±•å±‚':'#e6f9e8','äººæ‰å±‚':'#fef3e0','è£èª‰å±‚':'#fce8e8'}[layer] || '#f0f0f0';
    const layerColor = {'åŸºç¡€å±‚':'#1a73e8','å‘å±•å±‚':'#0d7a3f','äººæ‰å±‚':'#e37400','è£èª‰å±‚':'#c62828'}[layer] || '#666';
    addThinkingItem(2, `
      <div class="search-task-item">
        <span class="priority-dot" style="background:${pColor}"></span>
        <span class="dim-tag">${dim}</span>
        <span class="layer-tag" style="background:${layerBg};color:${layerColor}">${layer}</span>
        <span class="term">${term}</span>
      </div>`);
  }

  // â”€â”€ Section 3: æœç´¢è¿›åº¦ â”€â”€
  if (msg.includes('Web Search') || msg.includes('Webæœç´¢')) {
    if (msg.includes('è½® Web Search')) {
      const roundMatch = msg.match(/ç¬¬\s*(\d+)\s*è½®/);
      if (roundMatch) {
        thinkingState.round = parseInt(roundMatch[1]);
        if (thinkingState.round === 1) {
          completeSection(2, 'âœ“ å®Œæˆ');
          activateSection(3, 'æœç´¢ä¸­...');
        }
        addThinkingItem(3, `<div style="font-size:12px;color:#1a73e8;margin:6px 0 4px;font-weight:600;">â”€â”€ ç¬¬ ${thinkingState.round} è½®æœç´¢ â”€â”€</div>`);
      }
    }
    // å•æ¡æœç´¢: "ğŸ” [1/7] Webæœç´¢ [åŸºç¡€å±‚]: å¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒº..."
    const searchMatch = msg.match(/ğŸ”\s*\[(\d+)\/(\d+)\]\s*Webæœç´¢\s*\[(.+?)\]:\s*(.+?)(?:\s+\(|$)/);
    if (searchMatch) {
      const [, cur, total, layer, term] = searchMatch;
      const itemId = `search_${thinkingState.round}_${cur}`;
      addThinkingItem(3, `
        <div class="search-progress" id="${itemId}">
          <span class="status-icon"><span class="mini-spinner"></span></span>
          <span style="color:#999;font-size:11px;">[${cur}/${total}]</span>
          <span class="term">${term.trim()}</span>
        </div>`);
      document.getElementById('thinkBadge3').textContent = `${cur}/${total}`;
    }
  }
  // æœç´¢ç»“æœ: "âœ… æ‰¾åˆ° 3 æ¡æ”¿ç­–, è€—æ—¶ 11.5s"
  if (msg.includes('æ‰¾åˆ°') && msg.includes('æ¡æ”¿ç­–')) {
    const resultMatch = msg.match(/æ‰¾åˆ°\s*(\d+)\s*æ¡æ”¿ç­–/);
    // æ›´æ–°æœ€åä¸€ä¸ªæœç´¢è¿›åº¦é¡¹çš„å›¾æ ‡
    const items = document.querySelectorAll('#thinkBody3 .search-progress');
    if (items.length > 0) {
      const lastItem = items[items.length - 1];
      const icon = lastItem.querySelector('.status-icon');
      const count = resultMatch ? resultMatch[1] : '?';
      if (count === '0') {
        icon.innerHTML = '<span style="color:#999">â—‹</span>';
      } else {
        icon.innerHTML = `<span style="color:#34a853">âœ“</span>`;
        lastItem.querySelector('.term').innerHTML += ` <span style="color:#34a853;font-size:11px;">+${count}æ¡</span>`;
      }
    }
  }
  // è½®æ¬¡æ±‡æ€»: "ğŸ“Š ç¬¬ 1 è½®: +10 æ¡, ç´¯è®¡ 10 æ¡"
  if (msg.includes('ç´¯è®¡') && msg.includes('æ¡')) {
    const sumMatch = msg.match(/ç´¯è®¡\s*(\d+)\s*æ¡/);
    if (sumMatch) {
      addThinkingItem(3, `<div style="font-size:11px;color:#666;padding:2px 0;">ğŸ“Š ç´¯è®¡æ‰¾åˆ° ${sumMatch[1]} æ¡æ”¿ç­–</div>`);
    }
  }

  // â”€â”€ Section 4: è¯„å®¡ â”€â”€
  if (msg.includes('è½®è¯„å®¡')) {
    activateSection(4, 'è¯„å®¡ä¸­...');
  }
  // ç»´åº¦è¦†ç›–
  if (msg.includes('ç»´åº¦è¦†ç›–')) {
    addThinkingItem(4, `<div style="font-size:12px;color:#1a73e8;margin:4px 0;font-weight:600;">ç»´åº¦è¦†ç›–ï¼š</div>`);
  }
  const covMatch = msg.match(/(âœ…|âš ï¸|âŒ|â–)\s*(.+?):\s*(sufficient|insufficient|missing|not_applicable)\s*\((\d+)æ¡\)\s*(.*)/);
  if (covMatch) {
    const [, icon, dim, status, count, note] = covMatch;
    const statusText = {'sufficient':'å……è¶³','insufficient':'ä¸è¶³','missing':'ç¼ºå¤±','not_applicable':'ä¸é€‚ç”¨'}[status] || status;
    const color = {'sufficient':'#0d7a3f','insufficient':'#e37400','missing':'#c62828','not_applicable':'#999'}[status] || '#666';
    addThinkingItem(4, `<div class="thinking-item"><span class="bullet">${icon}</span><span class="text" style="color:${color}">${dim}ï¼š${statusText}ï¼ˆ${count}æ¡ï¼‰${note ? '<span style="color:#999;font-size:11px"> ' + note + '</span>' : ''}</span></div>`);
  }
  // è´¨é‡è¯„ä»·
  if (msg.includes('è´¨é‡:')) {
    const qMatch = msg.match(/(ğŸŸ¢|ğŸŸ¡|ğŸ”´|âšª)\s*è´¨é‡:\s*(\w+)\s*[â€”-]\s*(.*)/);
    if (qMatch) {
      const [, icon, quality, reason] = qMatch;
      addThinkingItem(4, `<div style="font-size:12px;margin:4px 0;">${icon} <b>è´¨é‡: ${quality}</b> â€” ${reason}</div>`);
    }
  }
  // è¡¥å……æœç´¢
  if (msg.includes('éœ€è¦è¡¥å……æœç´¢')) {
    const moreMatch = msg.match(/(\d+)\s*ä¸ªä»»åŠ¡/);
    if (moreMatch) {
      addThinkingItem(4, `<div style="font-size:12px;color:#e37400;margin:4px 0;">ğŸ”„ éœ€è¦è¡¥å……æœç´¢ ${moreMatch[1]} ä¸ªæ–¹å‘</div>`);
      completeSection(4, 'éœ€è¡¥å……');
    }
  }
  if (msg.includes('æœç´¢è´¨é‡è¾¾æ ‡') || msg.includes('æœç´¢è´¨é‡åŸºæœ¬æ»¡è¶³')) {
    completeSection(4, 'âœ“ è¾¾æ ‡');
  }

  // â”€â”€ å®Œæˆ â”€â”€
  if (msg.includes('Orchestrator å®Œæˆ')) {
    completeSection(3, 'âœ“ å®Œæˆ');
    if (document.getElementById('thinkBadge4').textContent === 'ç­‰å¾…ä¸­') {
      completeSection(4, 'âœ“ å®Œæˆ');
    }
  }
}
</script>

</body>
</html>
